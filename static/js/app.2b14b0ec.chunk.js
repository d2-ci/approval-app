(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{503:function(e,t,a){"use strict";const r=a(505),n=a(506),o=a(507),s=a(508),l=Symbol("encodeFragmentIdentifier");function i(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?n(e):e}function p(e){return Array.isArray(e)?e.sort():"object"===typeof e?p(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function y(e,t){i((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=a):r[e]=a};case"bracket":return(e,a,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],a):r[e]=[a]:r[e]=a};case"comma":case"separator":return(t,a,r)=>{const n="string"===typeof a&&a.includes(e.arrayFormatSeparator),o="string"===typeof a&&!n&&u(a,e).includes(e.arrayFormatSeparator);a=o?u(a,e):a;const s=n||o?a.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===a?a:u(a,e);r[t]=s};case"bracket-separator":return(t,a,r)=>{const n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n)return void(r[t]=a?u(a,e):a);const o=null===a?[]:a.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const n of e.split("&")){if(""===n)continue;let[e,s]=o(t.decode?n.replace(/\+/g," "):n,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:u(s,t),a(u(e,t),s,r)}for(const n of Object.keys(r)){const e=r[n];if("object"===typeof e&&null!==e)for(const a of Object.keys(e))e[a]=m(e[a],t);else r[n]=m(e,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const a=r[t];return Boolean(a)&&"object"===typeof a&&!Array.isArray(a)?e[t]=p(a):e[t]=a,e}),Object.create(null))}t.extract=f,t.parse=y,t.stringify=(e,t)=>{if(!e)return"";i((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>{return t.skipNull&&(null===(r=e[a])||void 0===r)||t.skipEmptyString&&""===e[a];var r},r=function(e){switch(e.arrayFormat){case"index":return t=>(a,r)=>{const n=a.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,[c(t,e),"[",n,"]"].join("")]:[...a,[c(t,e),"[",c(n,e),"]=",c(r,e)].join("")]};case"bracket":return t=>(a,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,[c(t,e),"[]"].join("")]:[...a,[c(t,e),"[]=",c(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return a=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:(n=null===n?"":n,0===r.length?[[c(a,e),t,c(n,e)].join("")]:[[r,c(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(a,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,c(t,e)]:[...a,[c(t,e),"=",c(r,e)].join("")]}}(t),n={};for(const s of Object.keys(e))a(s)||(n[s]=e[s]);const o=Object.keys(n);return!1!==t.sort&&o.sort(t.sort),o.map((a=>{const n=e[a];return void 0===n?"":null===n?c(a,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?c(a,t)+"[]":n.reduce(r(a),[]).join("&"):c(a,t)+"="+c(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,r]=o(e,"#");return Object.assign({url:a.split("?")[0]||"",query:y(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0,[l]:!0},a);const r=d(e.url).split("?")[0]||"",n=t.extract(e.url),o=t.parse(n,{sort:!1}),s=Object.assign(o,e.query);let i=t.stringify(s,a);i&&(i=`?${i}`);let u=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(u=`#${a[l]?c(e.fragmentIdentifier,a):e.fragmentIdentifier}`),`${r}${i}${u}`},t.pick=(e,a,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[l]:!1},r);const{url:n,query:o,fragmentIdentifier:i}=t.parseUrl(e,r);return t.stringifyUrl({url:n,query:s(o,a),fragmentIdentifier:i},r)},t.exclude=(e,a,r)=>{const n=Array.isArray(a)?e=>!a.includes(e):(e,t)=>!a(e,t);return t.pick(e,n,r)}},504:function(e,t,a){e.exports={wrapper:"error-message_wrapper__2DRYe"}},505:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},506:function(e,t,a){"use strict";var r="%[a-f0-9]{2}",n=new RegExp(r,"gi"),o=new RegExp("("+r+")+","gi");function s(e,t){try{return decodeURIComponent(e.join(""))}catch(n){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],s(a),s(r))}function l(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(n),a=1;a<t.length;a++)t=(e=s(t,a).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var a={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=o.exec(e);r;){try{a[r[0]]=decodeURIComponent(r[0])}catch(t){var n=l(r[0]);n!==r[0]&&(a[r[0]]=n)}r=o.exec(e)}a["%C2"]="\ufffd";for(var s=Object.keys(a),i=0;i<s.length;i++){var c=s[i];e=e.replace(new RegExp(c,"g"),a[c])}return e}(e)}}},507:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},508:function(e,t,a){"use strict";e.exports=function(e,t){for(var a={},r=Object.keys(e),n=Array.isArray(t),o=0;o<r.length;o++){var s=r[o],l=e[s];(n?-1!==t.indexOf(s):t(s,l,e))&&(a[s]=l)}return a}},509:function(e,t,a){e.exports={button:"context-select_button__1y8va",prefix:"context-select_prefix__3xDFu",value:"context-select_value__oltZj",tooltipwrap:"context-select_tooltipwrap__3Fqbe"}},510:function(e,t,a){e.exports={menu:"period-menu_menu__2CHPS"}},511:function(e,t,a){e.exports={container:"year-navigator_container__3XXd2",year:"year-navigator_year__14nbM"}},512:function(e,t,a){e.exports={button:"clear-all-button_button__mDEHm"}},513:function(e,t,a){e.exports={scrollbox:"org-unit-select_scrollbox__23k48"}},514:function(e,t,a){e.exports={bordered:"workflow-select-option_bordered__JBAIX",option:"workflow-select-option_option__1cqTS",title:"workflow-select-option_title__3zrtv",subtitle:"workflow-select-option_subtitle__3yrup"}},515:function(e,t,a){e.exports={message:"workflow-select_message__1jq5N"}},516:function(e,t,a){e.exports={container:"layout_container__Cp-96",top:"layout_top__2gcI9",content:"layout_content__10QOH",bottom:"layout_bottom__2toTd"}},517:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(0),o=a.n(n);const s=Object(n.createContext)({});var l=a(7),i=a(504),c=a.n(i);const u=({children:e,title:t})=>o.a.createElement("div",{className:c.a.wrapper},o.a.createElement(r.u,{error:!0,title:t},e)),p=()=>o.a.createElement(r.d,null,o.a.createElement(r.e,null));var d=a(5);const f=()=>o.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"m7 10.707-2.5-2.5005.7065-.7065 1.7935 1.793 3.7925-3.793.7075.7075zm1-9.707c-3.86599325 0-7 3.13400675-7 7 0 3.8659932 3.13400675 7 7 7 3.8659932 0 7-3.1340068 7-7 0-1.85651543-.7374979-3.63699282-2.0502525-4.94974747-1.3127547-1.31275465-3.09323207-2.05025253-4.9497475-2.05025253zm0 13c-3.3137085 0-6-2.6862915-6-6s2.6862915-6 6-6 6 2.6862915 6 6c0 1.59129894-.632141 3.1174224-1.7573593 4.2426407s-2.65134176 1.7573593-4.2426407 1.7573593z",fillRule:"evenodd"})),m=()=>o.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"m8 1c3.8659932 0 7 3.13400675 7 7 0 3.8659932-3.1340068 7-7 7-3.86599325 0-7-3.1340068-7-7 0-3.86599325 3.13400675-7 7-7zm0 1c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6-2.6862915-6-6-6zm0 3c1.65685425 0 3 1.34314575 3 3s-1.34314575 3-3 3-3-1.34314575-3-3 1.34314575-3 3-3z"})),y=()=>o.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"m10.9909978 13.1912785.4995502.8652231c-.6149252.36386-1.28431.6250019-1.98177134.7738229l-.30055406.0568756-.17347694-.9839041c.69055396-.1141334 1.35389354-.3555692 1.95625214-.7120175zm-5.99434717 0c.51630734.3055271 1.07741706.5265553 1.66206503.655345l.29418707.0566725-.17347695.9839041c-.70494478-.1165334-1.38558203-.3467594-2.01552871-.6810754l-.26679673-.1496231zm8.63003137-3.1410745.9388324.3416946c-.2371754.6739992-.5820951 1.3043178-1.0207212 1.8666408l-.1936788.2367617-.7653324-.6422054c.4556314-.5313108.8085871-1.1426479 1.0409-1.8028917zm-11.26571557 0c.19912533.5659233.48688614 1.095915.85196802 1.5703782l.18893198.2325135-.7653324.6422054c-.46511284-.5423995-.8385248-1.1562681-1.10619776-1.8172909l-.10820224-.2861116zm2.98641115-5.40375758 6.00000002 5.99999998-.7071068.7071068-6-5.99999999zm9.21813622.96165313c.2515515.66876676.3924886 1.37332892.4179358 2.08603675l.0038209.30586432-.9990803-.0000117c.0064405-.59989882-.0826983-1.19634818-.2634871-1.76706305l-.0980137-.28310973zm-13.14337922 0 .93882439.34171659c-.21122962.56151769-.3314642 1.15248403-.35677429 1.750614l-.00472648.29955878-.99908031.0000117c-.0087422-.81653816.13426921-1.6275962.42175669-2.39190107zm10.06841202-3.6646023c.6225747.35061085 1.1834226.79974418 1.661036 1.32935292l.1995328.23184963-.7653475.64218748c-.3806737-.46368907-.8323483-.86329844-1.337689-1.18428261l-.2570623-.15387264zm-6.99344486 0 .49953002.86523478c-.52274789.29437172-.99471877.66979291-1.39857796 1.11171803l-.19617336.22643722-.76534744-.64218748c.51816369-.6311239 1.14905485-1.16050444 1.86056874-1.56120255zm4.36598381-.88594632.34513864.05524888-.1735.9839c-.58966661-.11051404-1.19253336-.12630176-1.78597144-.04736316l-.29582856.04736316-.1735-.9839c.68795575-.12891407 1.39130692-.14733037 2.08366136-.05524888z",fillRule:"evenodd"})),g=({approvalState:e})=>{const{icon:t,displayName:a,type:n}=(e=>{switch(e){case"APPROVED_HERE":case"APPROVED_ELSEWHERE":return{icon:f,displayName:d.a.t("Approved"),type:"positive"};case"ACCEPTED_HERE":case"ACCEPTED_ELSEWHERE":return{icon:m,displayName:d.a.t("Ready for approval and accepted"),type:"neutral"};case"UNAPPROVED_READY":return{icon:m,displayName:d.a.t("Ready for approval"),type:"neutral"};case"UNAPPROVED_WAITING":case"UNAPPROVED_ELSEWHERE":return{icon:y,displayName:d.a.t("Waiting"),type:"default"};case"UNAPPROVABLE":return{icon:y,displayName:d.a.t("Cannot approve"),type:"negative"}}})(e),s={[n]:!0,icon:o.a.createElement(t,null)};return o.a.createElement(r.x,s,a)},h={me:{resource:"me",params:{fields:["id","authorities","organisationUnits"]}},dataApprovalWorkflows:{resource:"dataApprovalWorkflows",params:{paging:!1,fields:["id","displayName","dataApprovalLevels","periodType","dataSets[id,displayName]"]}}},v=({children:e})=>{const{data:t,loading:a,error:n}=Object(l.d)(h);if(a)return o.a.createElement(r.n,null,o.a.createElement(p,null));if(n)throw n;const i={...t.me,...t.dataApprovalWorkflows};return o.a.createElement(s.Provider,{value:i},e)},w=()=>Object(n.useContext)(s),D=({children:e})=>(()=>{const{authorities:e}=w();return e.some((e=>"ALL"===e||"M_dhis-web-approval"===e))})()?e:o.a.createElement(u,{title:d.a.t("Not authorized")},d.a.t("You don't have access to the Data Approval App. Contact a system administrator to request access.")),E=Object(n.createContext)({displayName:"",dataSets:[],status:{}});var b=a(503);const N=e=>`/#/?${Object(b.stringify)(e)}`;function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var k,F=k||(k={});F.Pop="POP",F.Push="PUSH",F.Replace="REPLACE";var S=function(e){return e};function O(e){e.preventDefault(),e.returnValue=""}function x(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function P(){return Math.random().toString(36).substr(2,8)}function _(e){var t=e.pathname,a=e.search;return(void 0===t?"/":t)+(void 0===a?"":a)+(void 0===(e=e.hash)?"":e)}function A(e){var t={};if(e){var a=e.indexOf("#");0<=a&&(t.hash=e.substr(a),e=e.substr(0,a)),0<=(a=e.indexOf("?"))&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}const j=function(e){function t(){var e=A(l.location.hash.substr(1)),t=e.pathname,a=e.search;e=e.hash;var r=i.state||{};return[r.idx,S({pathname:void 0===t?"/":t,search:void 0===a?"":a,hash:void 0===e?"":e,state:r.usr||null,key:r.key||"default"})]}function a(){if(c)m.call(c),c=null;else{var e=k.Pop,a=t(),r=a[0];if(a=a[1],m.length){if(null!=r){var n=p-r;n&&(c={action:e,location:a,retry:function(){s(-1*n)}},s(n))}}else o(e)}}function r(e){var t=document.querySelector("base"),a="";return t&&t.getAttribute("href")&&(a=-1===(a=(t=l.location.href).indexOf("#"))?t:t.slice(0,a)),a+"#"+("string"===typeof e?e:_(e))}function n(e,t){return void 0===t&&(t=null),S($({},d,{},"string"===typeof e?A(e):e,{state:t,key:P()}))}function o(e){u=e,e=t(),p=e[0],d=e[1],f.call({action:u,location:d})}function s(e){i.go(e)}void 0===e&&(e={});var l=void 0===(e=e.window)?document.defaultView:e,i=l.history,c=null;l.addEventListener("popstate",a),l.addEventListener("hashchange",(function(){_(t()[1])!==_(d)&&a()}));var u=k.Pop,p=(e=t())[0],d=e[1],f=x(),m=x();return null==p&&(p=0,i.replaceState($({},i.state,{idx:p}),"")),{get action(){return u},get location(){return d},createHref:r,push:function e(t,a){var s=k.Push,c=n(t,a);if(!m.length||(m.call({action:s,location:c,retry:function(){e(t,a)}}),0)){var u=[{usr:c.state,key:c.key,idx:p+1},r(c)];c=u[0],u=u[1];try{i.pushState(c,"",u)}catch(d){l.location.assign(u)}o(s)}},replace:function e(t,a){var s=k.Replace,l=n(t,a);m.length&&(m.call({action:s,location:l,retry:function(){e(t,a)}}),1)||(l=[{usr:l.state,key:l.key,idx:p},r(l)],i.replaceState(l[0],"",l[1]),o(s))},go:s,back:function(){s(-1)},forward:function(){s(1)},listen:function(e){return f.push(e)},block:function(e){var t=m.push(e);return 1===m.length&&l.addEventListener("beforeunload",O),function(){t(),m.length||l.removeEventListener("beforeunload",O)}}}}(),Y=()=>{const e=Object(b.parse)(j.location.search);return{wf:e.wf,pe:e.pe,ou:e.ou,ouDisplayName:e.ouDisplayName}},C=()=>{const{wf:e,pe:t,ou:a}=Y();if(e&&t&&a){const r=a.split("/");return{wf:e,pe:t,ou:r[r.length-1]}}return null},W={approvalStatus:{resource:"dataApprovals",params:({wf:e,pe:t,ou:a})=>({wf:e,pe:t,ou:a})}},R=({children:e})=>{const t=(()=>{const[e,t]=Object(n.useState)(C);return Object(n.useEffect)((()=>j.listen((()=>{t(C())}))),[]),e})(),{displayName:a,dataSets:r}=(e=>{const{dataApprovalWorkflows:t}=w();return e&&e.wf&&t&&t.find((({id:t})=>t===e.wf))||{}})(t),{loading:s,error:i,data:c,called:f,refetch:m}=Object(l.d)(W,{lazy:!0});return Object(n.useEffect)((()=>{t&&m(t)}),[t]),t&&f?s?o.a.createElement(p,null):i?o.a.createElement(u,{title:d.a.t("Could not load approval data")},i.message):o.a.createElement(E.Provider,{value:{displayName:a,dataSets:r,approvalStatus:c.approvalStatus}},e):null},U=()=>{const{approvalStatus:e}=Object(n.useContext)(E);return o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{approvalState:e.state}))},I=()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Data workspace placeholder")),T=()=>{throw new Error("Selection Context has not been initialized")},L=Object(n.createContext)({workflow:{},setWorkflow:T,period:{},setPeriod:T,orgUnit:{},setOrgUnit:T});var M=a(509),z=a.n(M);const B=({children:e,prefix:t,value:a,onClose:s,onOpen:l,disabled:i,open:c,requiredValuesMessage:u})=>{const p=Object(n.useRef)(),d=c?r.l:r.k,f=o.a.createElement("button",{ref:p,className:z.a.button,onClick:l,disabled:i},o.a.createElement("span",{className:z.a.prefix},t),!i&&o.a.createElement("span",{className:z.a.value},a),o.a.createElement(d,{color:i?r.z.grey600:void 0}));return o.a.createElement(o.a.Fragment,null,i?o.a.createElement(r.y,{content:u,placement:"bottom"},(({ref:e,onMouseOver:t,onMouseOut:a})=>o.a.createElement("div",{ref:e,onMouseOver:t,onMouseOut:a,className:z.a.tooltipwrap},f))):f,c&&o.a.createElement(r.w,{reference:p,arrow:!1,placement:"bottom-end",onClickOutside:s},e))},J=e=>[d.a.t("January"),d.a.t("February"),d.a.t("March"),d.a.t("April"),d.a.t("May"),d.a.t("June"),d.a.t("July"),d.a.t("August"),d.a.t("September"),d.a.t("October"),d.a.t("November"),d.a.t("December")][e],q=(e,t,a)=>r=>{let n=[];const o=parseInt(r.offset,10),s=r.filterFuturePeriods,l=r.reversePeriods,i=new Date(Date.now()).getFullYear()+o,c=((e,t)=>{const a=new Date(e,0,4),r=a.getDay(),n=a,o=r-t;return o>0?n.setDate(a.getDate()-o):o<0&&(n.setDate(a.getDate()-o),n.setDate(n.getDate()-7)),n})(i,t.startDay);let u=1;for(;c.getFullYear()<=i;){const a={};a.startDate=e(c),a.iso=`${i}${t.shortName}W${u}`,a.id=a.iso,c.setDate(c.getDate()+6),a.endDate=e(c);const r=u;if(a.displayName=`${d.a.t("Week {{weekNumber}}",{weekNumber:r})} - ${a.startDate} - ${a.endDate}`,c.getFullYear()>i&&c.getDate()>=4)break;n.push(a),c.setDate(c.getDate()+1),u+=1}return n=s?a(n):n,n=l?n.reverse():n,n},V=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`01 Jan ${l}`),c=i.getDay();let u=1;for(c<=4?i.setDate(i.getDate()-(c-1)):i.setDate(i.getDate()+(8-c));i.getFullYear()<=l;){const t={};t.iso=`${l}BiW${u}`,t.id=t.iso,t.startDate=e(i),i.setDate(i.getDate()+13),t.endDate=e(i);const a=u;if(t.displayName=`${d.a.t("Bi-Week {{biWeekNumber}}",{biWeekNumber:a})} - ${t.startDate} - ${t.endDate}`,i.getFullYear()>l&&i.getDate()>=4)break;r.push(t),i.setDate(i.getDate()+1),u+=1}return r=o?t(r):r,r=s?r.reverse():r,r},H=(e,t)=>{const a=e=>{const t=e.getFullYear();let a=String(e.getMonth()+1);return a=a.length<2?`0${a}`:a,t+a};return r=>{let n=[];const o=parseInt(r.offset,10),s=r.filterFuturePeriods,l=r.reversePeriods,i=new Date(Date.now()).getFullYear()+o,c=new Date(`31 Dec ${i}`);for(;c.getFullYear()===i;){const t={};t.endDate=e(c),c.setDate(1),t.startDate=e(c);const r=J(c.getMonth());t.displayName=`${r} ${i}`,t.iso=a(c),t.id=t.iso,n.push(t),c.setDate(0)}return n=s?t(n):n,n=l?n:n.reverse(),n}},Q=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`31 Dec ${l}`);let c=6;for(;i.getFullYear()===l;){const t={};t.endDate=e(i),i.setDate(0),i.setDate(1),t.startDate=e(i);const a=J(i.getMonth()),n=J(i.getMonth()+1),o=i.getFullYear();t.displayName=`${a} - ${n} ${o}`,t.iso=`${l}0${c}B`,t.id=t.iso,r.push(t),i.setDate(0),c--}return r=o?t(r):r,r=s?r:r.reverse(),r},G=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`31 Dec ${l}`);let c=4;for(;i.getFullYear()===l;){const t={};t.endDate=e(i),i.setDate(0),i.setDate(0),i.setDate(1),t.startDate=e(i);const a=J(i.getMonth()),n=J(i.getMonth()+2),o=i.getFullYear();t.displayName=`${a} - ${n} ${o}`,t.iso=`${l}Q${c}`,t.id=t.iso,r.push(t),i.setDate(0),c-=1}return r=o?t(r):r,r=s?r:r.reverse(),r},X=e=>t=>{let a=[];const r=parseInt(t.offset,10),n=t.filterFuturePeriods,o=t.reversePeriods,s=new Date(Date.now()).getFullYear()+r;let l={};return l.startDate=`${s}-01-01`,l.endDate=`${s}-06-30`,l.displayName=`${J(0)} - ${J(5)} ${s}`,l.iso=`${s}S1`,l.id=l.iso,a.push(l),l={},l.startDate=`${s}-07-01`,l.endDate=`${s}-12-31`,l.displayName=`${J(6)} - ${J(11)} ${s}`,l.iso=`${s}S2`,l.id=l.iso,a.push(l),a=n?e(a):a,a=o?a.reverse():a,a},K=e=>t=>{let a=[];const r=parseInt(t.offset,10),n=t.filterFuturePeriods,o=t.reversePeriods,s=new Date(Date.now()).getFullYear()+r;let l={};return l.startDate=`${s}-04-01`,l.endDate=`${s}-09-30`,l.displayName=`${J(3)} - ${J(8)} ${s}`,l.iso=`${s}AprilS1`,l.id=l.iso,a.push(l),l={},l.startDate=`${s}-10-01`,l.endDate=`${s+1}-03-31`,l.displayName=`${J(9)} ${s} - ${J(2)} ${s+1}`,l.iso=`${s}AprilS2`,l.id=l.iso,a.push(l),a=n?e(a):a,a=o?a.reverse():a,a},Z=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`31 Dec ${l}`);for(;l-i.getFullYear()<10;){const t={};t.endDate=e(i),i.setMonth(0,1),t.startDate=e(i);const a=i.getFullYear().toString();t.displayName=a,t.iso=i.getFullYear().toString(),t.id=t.iso.toString(),r.push(t),i.setDate(0)}return r=o?t(r):r,r=s?r:r.reverse(),r},ee=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`30 Sep ${l+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(i),i.setYear(i.getFullYear()-1),i.setDate(i.getDate()+1),t.startDate=e(i);const a=i.getFullYear(),n=i.getFullYear()+1;t.displayName=`${J(9)} ${a} - ${J(8)} ${n}`,t.id=`${i.getFullYear()}Oct`,r.push(t),i.setDate(i.getDate()-1)}return r=o?t(r):r,r=s?r:r.reverse(),r},te=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`31 Oct ${l+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(i),i.setYear(i.getFullYear()-1),i.setDate(i.getDate()+1),t.startDate=e(i);const a=i.getFullYear(),n=i.getFullYear()+1;t.displayName=`${J(10)} ${a} - ${J(9)} ${n}`,t.id=`${i.getFullYear()}Nov`,r.push(t),i.setDate(i.getDate()-1)}return r=o?t(r):r,r=s?r:r.reverse(),r},ae=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`30 Jun ${l+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(i),i.setYear(i.getFullYear()-1),i.setDate(i.getDate()+1),t.startDate=e(i);const a=i.getFullYear(),n=i.getFullYear()+1;t.displayName=`${J(6)} ${a} - ${J(5)} ${n}`,t.id=`${i.getFullYear()}July`,r.push(t),i.setDate(i.getDate()-1)}return r=o?t(r):r,r=s?r:r.reverse(),r},re=(e,t)=>a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`31 Mar ${l+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(i),i.setYear(i.getFullYear()-1),i.setDate(i.getDate()+1),t.startDate=e(i);const a=i.getFullYear(),n=i.getFullYear()+1;t.displayName=`${J(3)} ${a} - ${J(2)} ${n}`,t.id=`${i.getFullYear()}April`,r.push(t),i.setDate(i.getDate()-1)}return r=o?t(r):r,r=s?r:r.reverse(),r},ne=e=>{const t=e.getFullYear();let a=String(e.getMonth()+1),r=String(e.getDate());return a=a.length<2?`0${a}`:a,r=r.length<2?`0${r}`:r,`${t}-${a}-${r}`},oe=e=>{const t=[],a=new Date(Date.now());for(let r=0;r<e.length;r++)new Date(e[r].startDate)<=a&&t.push(e[r]);return t},se=()=>{return[{type:"Daily",regex:/^([0-9]{4})([0-9]{2})([0-9]{2})$/,getPeriods:(e=ne,t=oe,a=>{let r=[];const n=parseInt(a.offset,10),o=a.filterFuturePeriods,s=a.reversePeriods,l=new Date(Date.now()).getFullYear()+n,i=new Date(`01 Jan ${l}`);for(;i.getFullYear()===l;){const t={};t.startDate=e(i),t.endDate=t.startDate,t.displayName=t.startDate,t.iso=t.startDate.replace(/-/g,""),t.id=t.iso,r.push(t),i.setDate(i.getDate()+1)}return r=o?t(r):r,r=s?r.reverse():r,r}),displayName:d.a.t("Daily")},{type:"Weekly",regex:/^([0-9]{4})()W([0-9]{1,2})$/,getPeriods:q(ne,{shortName:"",startDay:1},oe),displayName:d.a.t("Weekly")},{type:"WeeklyWednesday",regex:/^([0-9]{4})(Wed)W([0-9]{1,2})$/,getPeriods:q(ne,{shortName:"Wed",startDay:3},oe),displayName:d.a.t("Weekly (Start Wednesday)")},{type:"WeeklyThursday",regex:/^([0-9]{4})(Thu)W([0-9]{1,2})$/,getPeriods:q(ne,{shortName:"Thu",startDay:4},oe),displayName:d.a.t("Weekly (Start Thursday)")},{type:"WeeklySaturday",regex:/^([0-9]{4})(Sat)W([0-9]{1,2})$/,getPeriods:q(ne,{shortName:"Sat",startDay:6},oe),displayName:d.a.t("Weekly (Start Saturday)")},{type:"WeeklySunday",regex:/^([0-9]{4})(Sun)W([0-9]{1,2})$/,getPeriods:q(ne,{shortName:"Sun",startDay:7},oe),displayName:d.a.t("Weekly (Start Sunday)")},{type:"BiWeekly",regex:/^([0-9]{4})BiW([0-9]{1,2})$/,getPeriods:V(ne,oe),displayName:d.a.t("Bi-weekly")},{type:"Monthly",regex:/^([0-9]{4})([0-9]{2})$/,getPeriods:H(ne,oe),displayName:d.a.t("Monthly")},{type:"BiMonthly",regex:/^([0-9]{4})([0-9]{2})B$/,getPeriods:Q(ne,oe),displayName:d.a.t("Bi-monthly")},{type:"Quarterly",regex:/^([0-9]{4})Q([1234])$/,getPeriods:G(ne,oe),displayName:d.a.t("Quarterly")},{type:"SixMonthly",regex:/^([0-9]{4})S([12])$/,getPeriods:X(oe),displayName:d.a.t("Six-monthly")},{type:"SixMonthlyApril",regex:/^([0-9]{4})AprilS([12])$/,getPeriods:K(oe),displayName:d.a.t("Six-monthly April")},{type:"Yearly",regex:/^([0-9]{4})$/,getPeriods:Z(ne,oe),displayName:d.a.t("Yearly")},{type:"FinancialNov",regex:/^([0-9]{4})Nov$/,getPeriods:te(ne,oe),displayName:d.a.t("Financial year (Start November)")},{type:"FinancialOct",regex:/^([0-9]{4})Oct$/,getPeriods:ee(ne,oe),displayName:d.a.t("Financial year (Start October)")},{type:"FinancialJuly",regex:/^([0-9]{4})July$/,getPeriods:ae(ne,oe),displayName:d.a.t("Financial year (Start July)")},{type:"FinancialApril",regex:/^([0-9]{4})April$/,getPeriods:re(ne,oe),displayName:d.a.t("Financial year (Start April)")}];var e,t},le=e=>e-new Date(Date.now()).getFullYear(),ie=(e,t)=>{const a=(e=>se().find((t=>t.type===e)))(e),r=le(t);return a&&Number.isInteger(r)?a.getPeriods({offset:r}):void 0};var ce=a(510),ue=a.n(ce);const pe=({periodType:e,year:t})=>{const{workflow:a,period:n,orgUnit:s,selectPeriod:l}=Pe(),i=ie(e,t);return o.a.createElement(r.o,{dense:!0,className:ue.a.menu},i.map((e=>o.a.createElement(r.p,{active:e.id===n.id,key:e.id,href:N({wf:a.id,ou:s.path,pe:e.id}),label:e.displayName,onClick:()=>l(e)}))))};var de=a(511),fe=a.n(de);const me=(new Date).getFullYear(),ye=({year:e,onYearChange:t})=>o.a.createElement("div",{className:fe.a.container},o.a.createElement(r.c,{disabled:1970===e,onClick:()=>t(e-1),icon:o.a.createElement(r.i,null)}),o.a.createElement("span",{className:fe.a.year},e),o.a.createElement(r.c,{disabled:e===me,onClick:()=>t(e+1),icon:o.a.createElement(r.j,null)})),ge="PERIOD",he=()=>{const{period:e,workflow:t,selectPeriod:a,openedSelect:r,setOpenedSelect:s}=Pe(),[l,i]=Object(n.useState)(e.year||me),c=r===ge,u=e.displayName||d.a.t("Choose a period");return Object(n.useEffect)((()=>{e.year&&i(e.year)}),[e]),o.a.createElement(B,{prefix:d.a.t("Period"),value:u,open:c,disabled:!t.id,onOpen:()=>s(ge),onClose:()=>s(""),requiredValuesMessage:d.a.t("Choose a workflow first")},o.a.createElement(ye,{year:l,onYearChange:e=>{a({}),i(e)}}),o.a.createElement(pe,{periodType:t.periodType,year:l}))},ve=e=>{const{wf:t,pe:a,ou:r,ouDisplayName:n}=Y(),o=we(e,t);return{workflow:o,period:De(a,o),orgUnit:Ee(r,n)}},we=(e,t)=>t?e.find((e=>e.id===t))||{}:1===e.length?e[0]:{},De=(e,t={})=>e&&t.id&&((e,t)=>{const a=t?se().filter((({type:e})=>t.some((t=>t===e)))):se();let r,n,o=0;for(;o<a.length&&!n;)r=a[o],n=e.match(r.regex),o++;if(!n)return;const s=parseInt(n[1]),l=le(s);return{...r.getPeriods({offset:l}).find((t=>t.id===e)),year:s,periodType:r}})(e,[t.periodType])||{},Ee=(e,t)=>e&&t?{path:e,displayName:t}:{},be="SET_OPENED_SELECT",Ne="CLEAR_ALL",$e="SELECT_WORKFLOW",ke="SELECT_PERIOD",Fe="SELECT_ORG_UNIT",Se="SET_STATE_FROM_QUERY_PARAMS",Oe=(e,{type:t,payload:a})=>{switch(t){case be:return{...e,openedSelect:a.openedSelect};case Ne:case $e:return{openedSelect:"",workflow:a.workflow,period:{},orgUnit:{}};case ke:return{...e,openedSelect:a.period.id?"":e.openedSelect,period:a.period,orgUnit:{}};case Fe:return{...e,openedSelect:"",orgUnit:a.orgUnit};case Se:return{openedSelect:"",...ve(a.dataApprovalWorkflows)};default:return e}},xe=({children:e})=>{const{dataApprovalWorkflows:t}=w(),[{openedSelect:a,workflow:r,period:s,orgUnit:l},i]=Object(n.useReducer)(Oe,{openedSelect:"",...ve(t)}),c={workflow:r,period:s,orgUnit:l,openedSelect:a,clearAll:()=>i({type:Ne,payload:{workflow:we(t)}}),setOpenedSelect:e=>i({type:be,payload:{openedSelect:e}}),selectWorkflow:e=>i({type:$e,payload:{workflow:e}}),selectPeriod:e=>i({type:ke,payload:{period:e}}),selectOrgUnit:e=>i({type:Fe,payload:{orgUnit:e}})};return Object(n.useEffect)((()=>{(e=>{const t=Object(b.stringify)({wf:e.workflow.id,pe:e.period.id,ou:e.orgUnit.path,ouDisplayName:e.orgUnit.displayName}),a=t?`?${t}`:"";a!==j.location.search&&j.push({pathname:"/",search:a})})({workflow:r,period:s,orgUnit:l})}),[r,s,l]),Object(n.useEffect)((()=>{const e=()=>{i({type:Se,payload:{dataApprovalWorkflows:t}})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),o.a.createElement(L.Provider,{value:c},e)},Pe=()=>Object(n.useContext)(L);var _e=a(512),Ae=a.n(_e);const je=()=>{const{clearAll:e,period:t,orgUnit:a}=Pe();return t.id||a.path?o.a.createElement(r.c,{className:Ae.a.button,secondary:!0,onClick:e},d.a.t("Clear selections")):null};var Ye=a(513),Ce=a.n(Ye);const We="ORG_UNIT",Re=()=>{const{organisationUnits:e}=w(),{orgUnit:t,selectOrgUnit:a,workflow:n,period:s,openedSelect:l,setOpenedSelect:i}=Pe(),c=l===We,u=t.displayName||d.a.t("Choose an organisation unit"),p=n.id?d.a.t("Choose a period first"):d.a.t("Choose a workflow and period first"),f=e.map((({id:e})=>e)),m=t.path?[t.path]:void 0;return o.a.createElement(B,{prefix:d.a.t("Organisation Unit"),value:u,open:c,disabled:!(n.id&&s.id),onOpen:()=>i(We),onClose:()=>i(""),requiredValuesMessage:p},o.a.createElement("div",{className:Ce.a.scrollbox},o.a.createElement(r.v,{roots:f,onChange:({displayName:e,id:t,path:r})=>{a({displayName:e,id:t,path:r})},initiallyExpanded:m,selected:m,singleSelection:!0})))};var Ue=a(514),Ie=a.n(Ue);const Te=({id:e,name:t,periodType:a,active:n,onClick:s})=>{const l=o.a.createElement("div",{className:Ie.a.option},o.a.createElement("span",{className:Ie.a.title},t),o.a.createElement("span",{className:Ie.a.subtitle},a||"UNAVAILABLE"));return o.a.createElement(r.p,{href:N({wf:e}),className:Ie.a.bordered,active:n,onClick:s,label:l})};var Le=a(515),Me=a.n(Le);const ze="WORKFLOW",Be=()=>{const{dataApprovalWorkflows:e}=w(),{workflow:t,selectWorkflow:a,openedSelect:n,setOpenedSelect:s}=Pe(),l=n===ze,i=t.displayName||d.a.t("Choose a workflow");return o.a.createElement(B,{prefix:d.a.t("Workflow"),value:i,open:l,onOpen:()=>s(ze),onClose:()=>s("")},0===e.length?o.a.createElement("div",{className:Me.a.message},d.a.t("No workflows found. None may exist, or you may not have access to any.")):o.a.createElement(r.o,null,e.map((e=>o.a.createElement(Te,{key:e.id,id:e.id,name:e.displayName,periodType:e.periodType,active:e.id===t.id,onClick:()=>a(e)})))))},Je=()=>o.a.createElement(xe,null,o.a.createElement(Be,null),o.a.createElement(he,null),o.a.createElement(Re,null),o.a.createElement(je,null));var qe=a(516),Ve=a.n(qe);function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const Qe=({children:e,className:t})=>o.a.createElement("div",{className:t},e),Ge=e=>o.a.createElement(Qe,He({},e,{className:Ve.a.container})),Xe=e=>o.a.createElement(Qe,He({},e,{className:Ve.a.top})),Ke=e=>o.a.createElement(Qe,He({},e,{className:Ve.a.content})),Ze=e=>o.a.createElement(Qe,He({},e,{className:Ve.a.bottom}));t.default=()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(r.g,{spacers:!0,colors:!0,theme:!0}),o.a.createElement(v,null,o.a.createElement(D,null,o.a.createElement(Ge,null,o.a.createElement(Xe,null,o.a.createElement(Je,null)),o.a.createElement(R,null,o.a.createElement(Ke,null,o.a.createElement(I,null)),o.a.createElement(Ze,null,o.a.createElement(U,null)))))))}}]);
//# sourceMappingURL=app.2b14b0ec.chunk.js.map