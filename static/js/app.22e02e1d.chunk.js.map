{"version":3,"sources":["../../../node_modules/query-string/index.js","D2App/shared/error-message/error-message.module.css","../../../node_modules/strict-uri-encode/index.js","../../../node_modules/decode-uri-component/index.js","../../../node_modules/split-on-first/index.js","../../../node_modules/filter-obj/index.js","../../../node_modules/@babel/runtime/helpers/esm/extends.js","D2App/bottom-bar/approve-button/approve-modal/approve-modal.module.css","D2App/bottom-bar/bottom-bar-item.module.css","D2App/bottom-bar/bottom-bar.module.css","D2App/data-workspace/display.module.css","D2App/data-workspace/title-bar.module.css","D2App/top-bar/context-select/context-select.module.css","D2App/top-bar/period-select/period-menu.module.css","D2App/top-bar/period-select/year-navigator.module.css","D2App/top-bar/clear-all-button/clear-all-button.module.css","D2App/top-bar/org-unit-select/org-unit-select.module.css","D2App/top-bar/workflow-select/workflow-select-option.module.css","D2App/top-bar/workflow-select/workflow-select.module.css","D2App/app/layout.module.css","D2App/app-context/app-context.js","D2App/shared/error-message/error-message.js","D2App/shared/loader/loader.js","D2App/shared/status-tag/icons.js","D2App/shared/status-tag/status-tag.js","D2App/shared/status-tag/get-tag-display-data.js","D2App/app-context/app-provider.js","D2App/app-context/use-app-context.js","D2App/auth/auth-wall.js","D2App/auth/use-is-authorized.js","D2App/workflow-context/workflow-context.js","D2App/navigation/create-href.js","D2App/navigation/history.js","D2App/navigation/read-query-params.js","D2App/workflow-context/use-selection-params.js","D2App/workflow-context/workflow-provider.js","D2App/workflow-context/use-selected-workflow.js","D2App/workflow-context/use-workflow-context.js","D2App/bottom-bar/accept-button/use-accept-data.js","D2App/bottom-bar/accept-button/accept-button.js","D2App/bottom-bar/approve-button/approve-modal/approve-modal.js","D2App/bottom-bar/approve-button/use-approve-data.js","D2App/bottom-bar/approve-button/approve-button.js","D2App/bottom-bar/bottom-bar-item.js","D2App/bottom-bar/unaccept-button/use-unaccept-data.js","D2App/bottom-bar/unaccept-button/unaccept-button.js","D2App/bottom-bar/unapprove-button/use-unapprove-data.js","D2App/bottom-bar/unapprove-button/unapprove-button.js","D2App/bottom-bar/bottom-bar.js","D2App/data-workspace/data-set-navigation.js","D2App/data-workspace/table.js","D2App/data-workspace/display.js","D2App/data-workspace/title-bar.js","D2App/data-workspace/data-workspace.js","D2App/top-bar/selection-context/selection-context.js","D2App/top-bar/context-select/context-select.js","D2App/top-bar/period-select/fixed-periods.js","D2App/top-bar/period-select/period-menu.js","D2App/top-bar/period-select/year-navigator.js","D2App/top-bar/period-select/period-select.js","D2App/top-bar/selection-context/initial-values.js","D2App/top-bar/selection-context/selection-provider.js","D2App/navigation/push-state-to-history.js","D2App/top-bar/selection-context/use-selection-context.js","D2App/top-bar/clear-all-button/clear-all-button.js","D2App/top-bar/org-unit-select/org-unit-select.js","D2App/top-bar/workflow-select/workflow-select-option.js","D2App/top-bar/workflow-select/workflow-select.js","D2App/top-bar/top-bar.js","D2App/app/layout.js","D2App/locales/index.js","D2App/app/index.js","D2App/app/app.js"],"names":["strictUriEncode","require","decodeComponent","splitOnFirst","filterObject","encodeFragmentIdentifier","Symbol","validateArrayFormatSeparator","value","length","TypeError","encode","options","strict","encodeURIComponent","decode","keysSorter","input","Array","isArray","sort","Object","keys","a","b","Number","map","key","removeHash","hashStart","indexOf","slice","extract","queryStart","parseValue","parseNumbers","isNaN","trim","parseBooleans","toLowerCase","parse","query","assign","arrayFormat","arrayFormatSeparator","formatter","result","accumulator","exec","replace","undefined","concat","includes","isEncodedArray","newValue","split","item","test","arrayValue","parserForArrayFormat","ret","create","param","k","reduce","Boolean","exports","stringify","object","shouldFilter","skipNull","skipEmptyString","index","join","keyValueSep","encoderForArrayFormat","objectCopy","filter","x","parseUrl","url","url_","hash","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","queryString","getHash","pick","exclude","exclusionFilter","module","str","charCodeAt","toString","toUpperCase","token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","decodeURIComponent","err","left","right","prototype","call","tokens","match","i","encodedURI","replaceMap","entries","customDecodeURIComponent","string","separator","separatorIndex","obj","predicate","isArr","val","_extends","target","arguments","source","hasOwnProperty","apply","this","AppContext","createContext","ErrorMessage","children","title","React","createElement","className","classes","wrapper","NoticeBox","error","Loader","CenteredContent","CircularLoader","Approved","height","viewBox","width","xmlns","d","fillRule","Ready","Waiting","StatusTag","approvalState","icon","Icon","displayName","type","i18n","t","Error","getTagDisplayData","props","Tag","me","resource","params","fields","dataApprovalWorkflows","paging","AppProvider","data","loading","useDataQuery","Layer","providerValue","Provider","useAppContext","useContext","AuthWall","authorities","some","authority","useIsAuthorized","WorkflowContext","dataSets","allowedActions","refresh","createHref","state","history","createHashHistory","readQueryParams","location","search","wf","pe","ou","ouDisplayName","getParamsIfAllAvailable","orgUnitPath","orgUnitPathSegments","useSelectionParams","setParams","useState","useEffect","listen","approvalStatus","WorkflowProvider","find","id","useSelectedWorkflow","called","refetch","lazy","message","useWorkflowContext","ACCEPT_DATA_MUTATION","AcceptButton","acceptData","useDataMutation","show","useAlert","nsSeparator","Button","small","disabled","onClick","async","ApproveModal","onApprove","onCancel","count","Modal","ModalTitle","ModalContent","styles","summary","summaryTitle","summaryList","summaryListItem","confirmationStatement","ModalActions","ButtonStrip","primary","APPROVE_DATA_MUTATION","ApproveButton","unexpectedError","setUnexpectedError","showApproveModal","setShowApproveModal","hideApprovalDialog","showApprovalSuccess","approveData","approveError","onComplete","onError","useApproveData","e","Fragment","BottomBarItem","bottomBarItem","UNACCEPT_DATA_MUTATION","UnacceptButton","unacceptData","UNAPPROVE_DATA_MUTATION","UnapproveButton","unapproveData","BottomBar","mayAccept","mayApprove","mayUnaccept","mayUnapprove","disableApproveBtn","bottomBar","DataSetNavigation","selected","onChange","TabBar","scrollable","dataSet","Tab","Table","columns","rows","DataTableToolbar","DataTable","TableHead","DataTableRow","column","DataTableColumnHeader","TableBody","row","DataTableCell","dataSetReport","ds","Display","workflowName","periodId","organisationUnitId","dataSetId","tables","fetchDataSet","display","retryButton","loadingWrapper","noData","table","headers","h","name","chooseDataSet","TitleBar","dataSetsCount","titleBar","workflowDataSetsCount","IconDimensionDataSet16","DataWorkspace","workflow","selectedDataSet","setSelectedDataSet","defaultFn","SelectionContext","setWorkflow","period","setPeriod","orgUnit","setOrgUnit","ContextSelect","prefix","placeholder","onClose","onOpen","open","requiredValuesMessage","buttonRef","useRef","IconChevronUp24","IconChevronDown24","button","ref","color","colors","grey600","Tooltip","content","placement","onMouseOver","onMouseOut","tooltipwrap","Popover","reference","arrow","onClickOutside","DAILY","WEEKLY","WEEKLY_WEDNESDAY","WEEKLY_THURSDAY","WEEKLY_SATURDAY","WEEKLY_SUNDAY","BI_WEEKLY","MONTHLY","BI_MONTHLY","QUARTERLY","SIX_MONTHLY","SIX_MONTHLY_APRIL","YEARLY","FINANCIAL_APRIL","FINANCIAL_JULY","FINANCIAL_OCT","FINANCIAL_NOV","getMonthName","getWeeklyPeriodType","formatYyyyMmDd","weekObj","fnFilter","config","periods","offset","parseInt","isFilter","filterFuturePeriods","isReverse","reversePeriods","year","Date","now","getFullYear","date","startDayOfWeek","jan4","jan4DayOfWeek","getDay","startDate","dayDiff","setDate","getDate","getEpiWeekStartDay","startDay","week","iso","shortName","endDate","weekNumber","push","reverse","getBiWeeklyPeriodType","day","biWeek","biWeekNumber","getMonthlyPeriodType","formatIso","y","m","String","getMonth","monthName","getBiMonthlyPeriodType","monthStart","monthEnd","fullYear","getQuarterlyPeriodType","quarter","getSixMonthlyPeriodType","getSixMonthlyAprilPeriodType","getYearlyPeriodType","setMonth","dateString","getFinancialOctoberPeriodType","setYear","yearStart","yearEnd","getFinancialNovemberPeriodType","getFinancialJulyPeriodType","getFinancialAprilPeriodType","array","getFixedPeriodTypes","regex","getPeriods","getYearOffsetFromNow","getFixedPeriodsByTypeAndYear","periodType","option","getFixedPeriodType","isInteger","PeriodMenu","selectedPeriod","selectPeriod","useSelectionContext","Menu","dense","menu","MenuItem","active","href","path","label","currentYear","YearNavigator","onYearChange","container","IconArrowLeft24","IconArrowRight24","PERIOD","PeriodSelect","openedSelect","setOpenedSelect","initialValues","workflows","initialWorkflowValue","initialPeriodValue","initialOrgUnitValue","workflowId","initialWorkflow","allowedTypes","periodTypes","allowedType","parsePeriodId","ACTIONS","reducer","payload","SelectionProvider","dispatch","useReducer","clearAll","fieldName","selectWorkflow","selectOrgUnit","paramString","pathname","pushStateToHistory","setStateFromQueryParams","window","addEventListener","removeEventListener","ClearAllButton","secondary","ORG_UNIT","OrgUnitSelect","organisationUnits","roots","selectedOrgUnitPath","scrollbox","OrganisationUnitTree","initiallyExpanded","singleSelection","WorkflowSelectOption","subtitle","bordered","WORKFLOW","WorkflowSelect","selectedWorkflow","TopBar","LayoutSection","Layout","top","bottom","addResources","enTranslations","App","CssVariables","spacers","theme"],"mappings":"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","file":"static/js/app.22e02e1d.chunk.js","sourcesContent":["'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator' ?\n\t\t\t\t'[]=' :\n\t\t\t\t'=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tcase 'bracket-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[\\])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null ?\n\t\t\t\t\t[] :\n\t\t\t\t\tvalue.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], arrayValue);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"error-message_wrapper__17C15\"};","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"summary\":\"approve-modal_summary__1abcn\",\"summaryTitle\":\"approve-modal_summaryTitle__2sA2i\",\"summaryList\":\"approve-modal_summaryList__1lufS\",\"confirmationStatement\":\"approve-modal_confirmationStatement__1LDKw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomBarItem\":\"bottom-bar-item_bottomBarItem__2GbAg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomBar\":\"bottom-bar_bottomBar__2CojG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"display\":\"display_display__1GxX4\",\"chooseDataSet\":\"display_chooseDataSet__2Nojl display_display__1GxX4\",\"loadingWrapper\":\"display_loadingWrapper__1l_5I\",\"noData\":\"display_noData__XihRO display_display__1GxX4\",\"retryButton\":\"display_retryButton__19fWD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleBar\":\"title-bar_titleBar__8rOU1\",\"workflowName\":\"title-bar_workflowName__3s44E\",\"workflowDataSetsCount\":\"title-bar_workflowDataSetsCount__4Ew1p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"context-select_button__1y8va\",\"prefix\":\"context-select_prefix__3xDFu\",\"value\":\"context-select_value__oltZj\",\"tooltipwrap\":\"context-select_tooltipwrap__3Fqbe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"period-menu_menu__2CHPS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"year-navigator_container__3XXd2\",\"year\":\"year-navigator_year__14nbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"clear-all-button_button__mDEHm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollbox\":\"org-unit-select_scrollbox__23k48\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bordered\":\"workflow-select-option_bordered__JBAIX\",\"option\":\"workflow-select-option_option__1cqTS\",\"title\":\"workflow-select-option_title__3zrtv\",\"subtitle\":\"workflow-select-option_subtitle__3yrup\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"workflow-select_message__1jq5N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"layout_container__Cp-96\",\"top\":\"layout_top__2gcI9\",\"content\":\"layout_content__10QOH\",\"bottom\":\"layout_bottom__2toTd\"};","import { createContext } from 'react';\nconst AppContext = /*#__PURE__*/createContext({});\nexport { AppContext };","import { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './error-message.module.css';\n\nconst ErrorMessage = ({\n  children,\n  title\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: classes.wrapper\n}, /*#__PURE__*/React.createElement(NoticeBox, {\n  error: true,\n  title: title\n}, children));\n\nErrorMessage.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired\n};\nexport { ErrorMessage };","import { CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\n\nconst Loader = () => /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n\nexport { Loader };","import React from 'react';\n\nconst Approved = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m7 10.707-2.5-2.5005.7065-.7065 1.7935 1.793 3.7925-3.793.7075.7075zm1-9.707c-3.86599325 0-7 3.13400675-7 7 0 3.8659932 3.13400675 7 7 7 3.8659932 0 7-3.1340068 7-7 0-1.85651543-.7374979-3.63699282-2.0502525-4.94974747-1.3127547-1.31275465-3.09323207-2.05025253-4.9497475-2.05025253zm0 13c-3.3137085 0-6-2.6862915-6-6s2.6862915-6 6-6 6 2.6862915 6 6c0 1.59129894-.632141 3.1174224-1.7573593 4.2426407s-2.65134176 1.7573593-4.2426407 1.7573593z\",\n  fillRule: \"evenodd\"\n}));\n\nconst Ready = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m8 1c3.8659932 0 7 3.13400675 7 7 0 3.8659932-3.1340068 7-7 7-3.86599325 0-7-3.1340068-7-7 0-3.86599325 3.13400675-7 7-7zm0 1c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6-2.6862915-6-6-6zm0 3c1.65685425 0 3 1.34314575 3 3s-1.34314575 3-3 3-3-1.34314575-3-3 1.34314575-3 3-3z\"\n}));\n\nconst Waiting = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m10.9909978 13.1912785.4995502.8652231c-.6149252.36386-1.28431.6250019-1.98177134.7738229l-.30055406.0568756-.17347694-.9839041c.69055396-.1141334 1.35389354-.3555692 1.95625214-.7120175zm-5.99434717 0c.51630734.3055271 1.07741706.5265553 1.66206503.655345l.29418707.0566725-.17347695.9839041c-.70494478-.1165334-1.38558203-.3467594-2.01552871-.6810754l-.26679673-.1496231zm8.63003137-3.1410745.9388324.3416946c-.2371754.6739992-.5820951 1.3043178-1.0207212 1.8666408l-.1936788.2367617-.7653324-.6422054c.4556314-.5313108.8085871-1.1426479 1.0409-1.8028917zm-11.26571557 0c.19912533.5659233.48688614 1.095915.85196802 1.5703782l.18893198.2325135-.7653324.6422054c-.46511284-.5423995-.8385248-1.1562681-1.10619776-1.8172909l-.10820224-.2861116zm2.98641115-5.40375758 6.00000002 5.99999998-.7071068.7071068-6-5.99999999zm9.21813622.96165313c.2515515.66876676.3924886 1.37332892.4179358 2.08603675l.0038209.30586432-.9990803-.0000117c.0064405-.59989882-.0826983-1.19634818-.2634871-1.76706305l-.0980137-.28310973zm-13.14337922 0 .93882439.34171659c-.21122962.56151769-.3314642 1.15248403-.35677429 1.750614l-.00472648.29955878-.99908031.0000117c-.0087422-.81653816.13426921-1.6275962.42175669-2.39190107zm10.06841202-3.6646023c.6225747.35061085 1.1834226.79974418 1.661036 1.32935292l.1995328.23184963-.7653475.64218748c-.3806737-.46368907-.8323483-.86329844-1.337689-1.18428261l-.2570623-.15387264zm-6.99344486 0 .49953002.86523478c-.52274789.29437172-.99471877.66979291-1.39857796 1.11171803l-.19617336.22643722-.76534744-.64218748c.51816369-.6311239 1.14905485-1.16050444 1.86056874-1.56120255zm4.36598381-.88594632.34513864.05524888-.1735.9839c-.58966661-.11051404-1.19253336-.12630176-1.78597144-.04736316l-.29582856.04736316-.1735-.9839c.68795575-.12891407 1.39130692-.14733037 2.08366136-.05524888z\",\n  fillRule: \"evenodd\"\n}));\n\nexport { Approved, Ready, Waiting };","import { Tag } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getTagDisplayData } from './get-tag-display-data.js';\n\nconst StatusTag = ({\n  approvalState\n}) => {\n  const {\n    icon: Icon,\n    displayName,\n    type\n  } = getTagDisplayData(approvalState);\n  const props = {\n    [type]: true,\n    icon: /*#__PURE__*/React.createElement(Icon, null)\n  };\n  return /*#__PURE__*/React.createElement(Tag, props, displayName);\n};\n\nStatusTag.propTypes = {\n  approvalState: PropTypes.oneOf(['APPROVED_HERE', 'APPROVED_ELSEWHERE', 'ACCEPTED_HERE', 'ACCEPTED_ELSEWHERE', 'UNAPPROVED_READY', 'UNAPPROVED_WAITING', 'UNAPPROVED_ELSEWHERE', 'UNAPPROVED_ABOVE', 'UNAPPROVABLE'])\n};\nexport { StatusTag };","import i18n from '@dhis2/d2-i18n';\nimport { Approved, Ready, Waiting } from './icons.js';\n/*\n * TODO: The current classification logic was discussed with\n * Joe Cooper, but needs to be confirmed by either Lars or Jim.\n * Specifically these cases are not clear:\n * A. Do ACCEPTED_HERE and ACCEPTED_ELSEWHERE fall into \"Ready for\n *    approval and accepted\"? This doesn't seem to match the webapi docs.\n * B. Should we show a red tag for UNAPPROVABLE and show a negative tag?\n *    This was not included in the design specs.\n */\n\nconst getTagDisplayData = approvalState => {\n  switch (approvalState) {\n    case 'APPROVED_HERE':\n    case 'APPROVED_ELSEWHERE':\n      return {\n        icon: Approved,\n        displayName: i18n.t('Approved'),\n        type: 'positive'\n      };\n\n    case 'ACCEPTED_HERE':\n    case 'ACCEPTED_ELSEWHERE':\n      return {\n        icon: Ready,\n        displayName: i18n.t('Ready for approval and accepted'),\n        type: 'neutral'\n      };\n\n    case 'UNAPPROVED_READY':\n      return {\n        icon: Ready,\n        displayName: i18n.t('Ready for approval'),\n        type: 'neutral'\n      };\n\n    case 'UNAPPROVED_WAITING':\n    case 'UNAPPROVED_ELSEWHERE':\n    case 'UNAPPROVED_ABOVE':\n      return {\n        icon: Waiting,\n        displayName: i18n.t('Waiting'),\n        type: 'default'\n      };\n\n    case 'UNAPPROVABLE':\n      return {\n        icon: Waiting,\n        displayName: i18n.t('Cannot approve'),\n        type: 'negative'\n      };\n\n    default:\n      throw new Error(`Unknown approval state: '${approvalState}'`);\n  }\n};\n\nexport { getTagDisplayData };","import { useDataQuery } from '@dhis2/app-runtime';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Layer } from '@dhis2/ui';\nimport React from 'react';\nimport { Loader } from '../shared/index.js';\nimport { AppContext } from './app-context.js';\nconst query = {\n  me: {\n    resource: 'me',\n    params: {\n      fields: ['id', 'authorities', 'organisationUnits']\n    }\n  },\n  dataApprovalWorkflows: {\n    // This is generic enpoint but will only return\n    // workflows a user is allowed to see\n    resource: 'dataApprovalWorkflows',\n    params: {\n      paging: false,\n      fields: ['id', 'displayName', 'dataApprovalLevels', 'periodType', 'dataSets[id,displayName,periodType]']\n    }\n  }\n};\n\nconst AppProvider = ({\n  children\n}) => {\n  const {\n    data,\n    loading,\n    error\n  } = useDataQuery(query);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(Loader, null));\n  }\n\n  if (error) {\n    /**\n     * The app can't continue if this fails, because it doesn't\n     * have any data, so throw the error and let it be caught by\n     * the error boundary in the app-shell\n     */\n    throw error;\n  }\n\n  const providerValue = { ...data.me,\n    ...data.dataApprovalWorkflows\n  };\n  return /*#__PURE__*/React.createElement(AppContext.Provider, {\n    value: providerValue\n  }, children);\n};\n\nAppProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { AppProvider };","import { useContext } from 'react';\nimport { AppContext } from './app-context.js';\nexport const useAppContext = () => useContext(AppContext);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ErrorMessage } from '../shared/index.js';\nimport { useIsAuthorized } from './use-is-authorized.js';\n\nconst AuthWall = ({\n  children\n}) => {\n  const isAuthorized = useIsAuthorized();\n\n  if (!isAuthorized) {\n    return /*#__PURE__*/React.createElement(ErrorMessage, {\n      title: i18n.t('Not authorized')\n    }, i18n.t(\"You don't have access to the Data Approval App. Contact a system administrator to request access.\"));\n  }\n\n  return children;\n};\n\nAuthWall.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { AuthWall };","import { useAppContext } from '../app-context/index.js';\nexport const useIsAuthorized = () => {\n  const {\n    authorities\n  } = useAppContext();\n  return authorities.some(authority => authority === 'ALL' || authority === 'M_dhis-web-approval');\n};","import { createContext } from 'react';\nconst WorkflowContext = /*#__PURE__*/createContext({\n  displayName: '',\n  dataSets: [],\n  approvalState: '',\n  allowedActions: {},\n  params: {},\n  refresh: () => {\n    throw new Error('WorkflowContext.refresh has not been initialized');\n  }\n});\nexport { WorkflowContext };","import { stringify } from 'query-string';\nexport const createHref = state => `/#/?${stringify(state)}`;","import { createHashHistory } from 'history';\nexport const history = createHashHistory();","import { parse } from 'query-string';\nimport { history } from './history.js';\nexport const readQueryParams = () => {\n  const params = parse(history.location.search); // ensure only known params are returned\n\n  return {\n    wf: params.wf,\n    pe: params.pe,\n    ou: params.ou,\n    ouDisplayName: params.ouDisplayName\n  };\n};","import { useState, useEffect } from 'react';\nimport { history, readQueryParams } from '../navigation/index.js';\nexport const getParamsIfAllAvailable = () => {\n  const {\n    wf,\n    pe,\n    ou: orgUnitPath\n  } = readQueryParams();\n\n  if (wf && pe && orgUnitPath) {\n    const orgUnitPathSegments = orgUnitPath.split('/');\n    const orgUnitId = orgUnitPathSegments[orgUnitPathSegments.length - 1];\n    return {\n      wf,\n      pe,\n      ou: orgUnitId\n    };\n  }\n\n  return null;\n};\nexport const useSelectionParams = () => {\n  const [params, setParams] = useState(getParamsIfAllAvailable);\n  useEffect(() => // The call to listen returns an `unlisten` function to clean up the effect\n  history.listen(() => {\n    setParams(getParamsIfAllAvailable());\n  }), []);\n  return params;\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport React, { useEffect } from 'react';\nimport { ErrorMessage, Loader } from '../shared/index.js';\nimport { useSelectedWorkflow } from './use-selected-workflow.js';\nimport { useSelectionParams } from './use-selection-params.js';\nimport { WorkflowContext } from './workflow-context.js';\nconst query = {\n  approvalStatus: {\n    resource: 'dataApprovals',\n    params: ({\n      wf,\n      pe,\n      ou\n    }) => ({\n      wf,\n      pe,\n      ou\n    })\n  }\n};\n\nconst WorkflowProvider = ({\n  children\n}) => {\n  const params = useSelectionParams();\n  const {\n    displayName,\n    dataSets\n  } = useSelectedWorkflow(params);\n  const {\n    loading,\n    error,\n    data,\n    called,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (params) {\n      refetch(params);\n    }\n  }, [params]);\n\n  if (!params || !called) {\n    return null;\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loader, null);\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(ErrorMessage, {\n      title: i18n.t('Could not load approval data')\n    }, error.message);\n  }\n\n  const {\n    state: approvalState,\n    ...allowedActions\n  } = data.approvalStatus;\n  return /*#__PURE__*/React.createElement(WorkflowContext.Provider, {\n    value: {\n      displayName,\n      dataSets,\n      approvalState,\n      allowedActions,\n      params,\n      refresh: refetch\n    }\n  }, children);\n};\n\nWorkflowProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { WorkflowProvider };","import { useAppContext } from '../app-context/index.js';\n\nconst useSelectedWorkflow = params => {\n  const {\n    dataApprovalWorkflows\n  } = useAppContext();\n\n  if (!(params && params.wf && dataApprovalWorkflows)) {\n    return {};\n  }\n\n  return dataApprovalWorkflows.find(({\n    id\n  }) => id === params.wf) || {};\n};\n\nexport { useSelectedWorkflow };","import { useContext } from 'react';\nimport { WorkflowContext } from './workflow-context.js';\nexport const useWorkflowContext = () => useContext(WorkflowContext);","import { useDataMutation } from '@dhis2/app-runtime';\nexport const ACCEPT_DATA_MUTATION = {\n  resource: 'dataAcceptances',\n  type: 'create',\n  params: ({\n    wf,\n    pe,\n    ou\n  }) => ({\n    wf,\n    pe,\n    ou\n  })\n};\nexport const useAcceptData = () => useDataMutation(ACCEPT_DATA_MUTATION);","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useWorkflowContext } from '../../workflow-context/index.js';\nimport { useAcceptData } from './use-accept-data.js';\n\nconst AcceptButton = () => {\n  const [acceptData, {\n    loading,\n    error\n  }] = useAcceptData();\n  const {\n    params,\n    refresh\n  } = useWorkflowContext();\n  const {\n    show\n  } = useAlert(i18n.t('Acceptance failed: {{error}}', {\n    error: error ? error.toString() : '',\n    nsSeparator: null\n  }));\n  useEffect(() => {\n    if (error !== null && error !== void 0 && error.message) show();\n  }, [error === null || error === void 0 ? void 0 : error.message]);\n  return /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: loading,\n    onClick: async () => {\n      const {\n        wf,\n        pe,\n        ou\n      } = params;\n      await acceptData({\n        wf,\n        pe,\n        ou\n      });\n      refresh();\n    }\n  }, i18n.t('Accept'));\n};\n\nexport { AcceptButton };","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useWorkflowContext } from '../../../workflow-context/index.js';\nimport styles from './approve-modal.module.css'; // Hendrik is working on some changes that will allow to get the current\n// period value from the url, until we can leverage on that,\n// we don't display the period\n// @TODO: Implement period display once possible\n\nconst TODO_GET_PERIOD = false;\n\nconst ApproveModal = ({\n  onApprove,\n  onCancel,\n  error\n}) => {\n  const {\n    dataSets\n  } = useWorkflowContext();\n  const count = dataSets.length;\n  return /*#__PURE__*/React.createElement(Modal, null, /*#__PURE__*/React.createElement(ModalTitle, null, count > 1 ? i18n.t('Approving {{count}} data sets', {\n    count\n  }) : i18n.t('Approving {{count}} data set', {\n    count\n  })), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.summary\n  }, !TODO_GET_PERIOD && /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.summaryTitle\n  }, count > 1 ? i18n.t('{{count}} data sets will be approved:', {\n    count\n  }) : i18n.t('{{count}} data set will be approved:', {\n    count\n  })), TODO_GET_PERIOD && /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.summaryTitle\n  }, count > 1 ? i18n.t('{{count}} data sets for {{period}} will be approved:', {\n    count\n  }) : i18n.t('{{count}} data set for {{period}} will be approved:', {\n    count\n  })), /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.summaryList\n  }, dataSets.map(({\n    id,\n    displayName\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.summaryListItem,\n    key: id\n  }, displayName)))), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.confirmationStatement\n  }, i18n.t('Are you sure you want to approve this data?')), error && /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('There was a problem saving this approval')\n  }, i18n.t('This data couldn’t be approved. Try again, or contact your system administrator.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onApprove\n  }, i18n.t('Approve')))));\n};\n\nApproveModal.propTypes = {\n  onApprove: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  error: PropTypes.instanceOf(Error)\n};\nexport { ApproveModal };","import { useDataMutation } from '@dhis2/app-runtime';\nexport const APPROVE_DATA_MUTATION = {\n  resource: 'dataApprovals',\n  type: 'create',\n  params: ({\n    wf,\n    pe,\n    ou\n  }) => ({\n    wf,\n    pe,\n    ou\n  })\n};\nexport const useApproveData = ({\n  onComplete,\n  onError\n}) => useDataMutation(APPROVE_DATA_MUTATION, {\n  onComplete,\n  onError\n});","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useWorkflowContext } from '../../workflow-context/index.js';\nimport { ApproveModal } from './approve-modal/index.js';\nimport { useApproveData } from './use-approve-data.js';\n\nconst ApproveButton = ({\n  disabled\n}) => {\n  // state\n  const [unexpectedError, setUnexpectedError] = useState(null);\n  const [showApproveModal, setShowApproveModal] = useState(false);\n  const {\n    params,\n    refresh\n  } = useWorkflowContext(); // callbacks\n\n  const showApprovalDialog = () => setShowApproveModal(true);\n\n  const hideApprovalDialog = () => setShowApproveModal(false);\n\n  const onApprove = () => {\n    const {\n      wf,\n      pe,\n      ou\n    } = params;\n    approveData({\n      wf,\n      pe,\n      ou\n    });\n  }; // api\n\n\n  const {\n    show: showApprovalSuccess\n  } = useAlert(i18n.t('Approval saved'));\n  const [approveData, {\n    loading,\n    error: approveError\n  }] = useApproveData({\n    onComplete: () => {\n      showApprovalSuccess();\n      refresh();\n      hideApprovalDialog();\n    },\n    onError: e => {\n      setUnexpectedError(e);\n      hideApprovalDialog();\n    }\n  }); // derived state\n\n  const error = approveError || unexpectedError;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    small: true,\n    disabled: disabled,\n    onClick: showApprovalDialog\n  }, i18n.t('Approve')), showApproveModal && /*#__PURE__*/React.createElement(ApproveModal, {\n    error: error,\n    loading: loading,\n    onApprove: onApprove,\n    onCancel: hideApprovalDialog\n  }));\n};\n\nApproveButton.propTypes = {\n  disabled: PropTypes.bool\n};\nexport { ApproveButton };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './bottom-bar-item.module.css';\n\nconst BottomBarItem = ({\n  children\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomBarItem\n  }, children);\n};\n\nBottomBarItem.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport { BottomBarItem };","import { useDataMutation } from '@dhis2/app-runtime';\nexport const UNACCEPT_DATA_MUTATION = {\n  resource: 'dataAcceptances',\n  type: 'delete',\n  params: ({\n    wf,\n    pe,\n    ou\n  }) => ({\n    wf,\n    pe,\n    ou\n  })\n};\nexport const useUnacceptData = () => useDataMutation(UNACCEPT_DATA_MUTATION);","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useWorkflowContext } from '../../workflow-context/index.js';\nimport { useUnacceptData } from './use-unaccept-data.js';\n\nconst UnacceptButton = () => {\n  const [unacceptData, {\n    loading,\n    error\n  }] = useUnacceptData();\n  const {\n    params,\n    refresh\n  } = useWorkflowContext();\n  const {\n    show\n  } = useAlert(i18n.t('Unacceptance failed: {{error}}', {\n    error: error ? error.toString() : '',\n    nsSeparator: null\n  }));\n  useEffect(() => {\n    if (error !== null && error !== void 0 && error.message) show();\n  }, [error === null || error === void 0 ? void 0 : error.message]);\n  return /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: loading,\n    onClick: async () => {\n      const {\n        wf,\n        pe,\n        ou\n      } = params;\n      await unacceptData({\n        wf,\n        pe,\n        ou\n      });\n      refresh();\n    }\n  }, i18n.t('Unaccept'));\n};\n\nexport { UnacceptButton };","import { useDataMutation } from '@dhis2/app-runtime';\nexport const UNAPPROVE_DATA_MUTATION = {\n  resource: 'dataApprovals',\n  type: 'delete',\n  params: ({\n    wf,\n    pe,\n    ou\n  }) => ({\n    wf,\n    pe,\n    ou\n  })\n};\nexport const useUnapproveData = () => useDataMutation(UNAPPROVE_DATA_MUTATION);","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useWorkflowContext } from '../../workflow-context/index.js';\nimport { useUnapproveData } from './use-unapprove-data.js';\n\nconst UnapproveButton = () => {\n  const [unapproveData, {\n    loading,\n    error\n  }] = useUnapproveData();\n  const {\n    params,\n    refresh\n  } = useWorkflowContext();\n  const {\n    show\n  } = useAlert(i18n.t('Unapproval failed: {{error}}', {\n    error: error ? error.toString() : '',\n    nsSeparator: null\n  }));\n  useEffect(() => {\n    if (error !== null && error !== void 0 && error.message) show();\n  }, [error === null || error === void 0 ? void 0 : error.message]);\n  return /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: loading,\n    onClick: async () => {\n      const {\n        wf,\n        pe,\n        ou\n      } = params;\n      await unapproveData({\n        wf,\n        pe,\n        ou\n      });\n      refresh();\n    }\n  }, i18n.t('Unapprove'));\n};\n\nexport { UnapproveButton };","import React from 'react';\nimport { StatusTag } from '../shared/index.js';\nimport { useWorkflowContext } from '../workflow-context/index.js';\nimport { AcceptButton } from './accept-button/index.js';\nimport { ApproveButton } from './approve-button/index.js';\nimport { BottomBarItem } from './bottom-bar-item.js';\nimport styles from './bottom-bar.module.css';\nimport { UnacceptButton } from './unaccept-button/index.js';\nimport { UnapproveButton } from './unapprove-button/index.js';\n\nconst BottomBar = () => {\n  const {\n    allowedActions,\n    approvalState\n  } = useWorkflowContext();\n  const {\n    mayAccept,\n    mayApprove,\n    mayUnaccept,\n    mayUnapprove\n  } = allowedActions;\n  const disableApproveBtn = !mayApprove && !mayUnapprove;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.bottomBar\n  }, /*#__PURE__*/React.createElement(BottomBarItem, null, /*#__PURE__*/React.createElement(StatusTag, {\n    approvalState: approvalState\n  })), (mayApprove || disableApproveBtn) && /*#__PURE__*/React.createElement(BottomBarItem, null, /*#__PURE__*/React.createElement(ApproveButton, {\n    disabled: disableApproveBtn\n  })), mayAccept && /*#__PURE__*/React.createElement(BottomBarItem, null, /*#__PURE__*/React.createElement(AcceptButton, null)), mayUnapprove && /*#__PURE__*/React.createElement(BottomBarItem, null, /*#__PURE__*/React.createElement(UnapproveButton, null)), mayUnaccept && /*#__PURE__*/React.createElement(BottomBarItem, null, /*#__PURE__*/React.createElement(UnacceptButton, null))));\n};\n\nexport { BottomBar };","import { TabBar, Tab } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst DataSetNavigation = ({\n  dataSets,\n  selected,\n  onChange\n}) => /*#__PURE__*/React.createElement(TabBar, {\n  scrollable: true\n}, dataSets.map(dataSet => /*#__PURE__*/React.createElement(Tab, {\n  key: dataSet.id,\n  onClick: () => onChange(dataSet.id),\n  selected: dataSet.id === selected\n}, dataSet.displayName)));\n\nDataSetNavigation.propTypes = {\n  dataSets: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  selected: PropTypes.string\n};\nexport { DataSetNavigation };","import { DataTableToolbar, DataTable, TableHead, DataTableRow, DataTableColumnHeader, TableBody, DataTableCell } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst Table = ({\n  title,\n  columns,\n  rows\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataTableToolbar, null, title), /*#__PURE__*/React.createElement(DataTable, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, columns.map(column => /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n  key: column\n}, column)))), /*#__PURE__*/React.createElement(TableBody, null, rows.map((row, index) => /*#__PURE__*/React.createElement(DataTableRow, {\n  key: index\n}, row.map((value, index) => /*#__PURE__*/React.createElement(DataTableCell, {\n  key: index\n}, value)))))));\n\nTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  rows: PropTypes.array.isRequired,\n  title: PropTypes.string.isRequired\n};\nexport { Table };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport styles from './display.module.css';\nimport { Table } from './table.js';\nconst query = {\n  dataSetReport: {\n    resource: 'dataSetReport',\n    params: ({\n      ds,\n      pe,\n      ou\n    }) => ({\n      ds,\n      pe,\n      ou\n    })\n  }\n};\n\nconst Display = ({\n  workflowName,\n  periodId,\n  organisationUnitId,\n  dataSetId\n}) => {\n  const {\n    called,\n    loading,\n    data,\n    error,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const tables = data === null || data === void 0 ? void 0 : data.dataSetReport;\n\n  const fetchDataSet = () => {\n    refetch({\n      ds: dataSetId,\n      pe: periodId,\n      ou: organisationUnitId\n    });\n  };\n\n  useEffect(() => {\n    if (dataSetId) {\n      fetchDataSet();\n    }\n  }, [dataSetId]);\n\n  if (!dataSetId) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.chooseDataSet\n    }, /*#__PURE__*/React.createElement(\"h2\", null, i18n.t('Choose a data set to review')), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('{{- workflowName}} has multiple data sets. Choose a data set from the tabs above.', {\n      workflowName\n    })));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.display\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('There was a problem displaying this data set')\n    }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`This data set couldn't be loaded or displayed. Try again, or contact your system administrator.`)), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.retryButton,\n      onClick: fetchDataSet\n    }, i18n.t('Retry loading data set'))));\n  }\n\n  if (!called || loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.display\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loadingWrapper\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }), i18n.t('Loading data set')));\n  }\n\n  if (tables.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData\n    }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`This data set doesn't have any data for the selected period and organisation unit.`)));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.display\n  }, tables.map(table => /*#__PURE__*/React.createElement(Table, {\n    key: table.title,\n    title: table.title,\n    columns: table.headers.map(h => h.name),\n    rows: table.rows\n  })));\n};\n\nDisplay.propTypes = {\n  organisationUnitId: PropTypes.string.isRequired,\n  periodId: PropTypes.string.isRequired,\n  workflowName: PropTypes.string.isRequired,\n  dataSetId: PropTypes.string\n};\nexport { Display };","import i18n from '@dhis2/d2-i18n';\nimport { IconDimensionDataSet16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { StatusTag } from '../shared/status-tag/index.js';\nimport styles from './title-bar.module.css';\n\nconst TitleBar = ({\n  name,\n  dataSetsCount,\n  approvalState\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.titleBar\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: styles.workflowName\n}, name), /*#__PURE__*/React.createElement(\"span\", {\n  className: styles.workflowDataSetsCount\n}, /*#__PURE__*/React.createElement(IconDimensionDataSet16, null), i18n.t('{{dataSetsCount}} data sets', {\n  dataSetsCount\n})), /*#__PURE__*/React.createElement(StatusTag, {\n  approvalState: approvalState\n}));\n\nTitleBar.propTypes = {\n  approvalState: PropTypes.string.isRequired,\n  dataSetsCount: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { TitleBar };","import React, { useState } from 'react';\nimport { useWorkflowContext } from '../workflow-context/index.js';\nimport { useSelectionParams } from '../workflow-context/use-selection-params.js';\nimport { DataSetNavigation } from './data-set-navigation.js';\nimport { Display } from './display.js';\nimport { TitleBar } from './title-bar.js';\n\nconst DataWorkspace = () => {\n  const {\n    pe: periodId,\n    ou: organisationUnitId\n  } = useSelectionParams();\n  const workflow = useWorkflowContext();\n  const [selectedDataSet, setSelectedDataSet] = useState(workflow.dataSets.length === 1 ? workflow.dataSets[0].id : null);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleBar, {\n    name: workflow.displayName,\n    dataSetsCount: workflow.dataSets.length,\n    approvalState: workflow.approvalState\n  }), /*#__PURE__*/React.createElement(DataSetNavigation, {\n    dataSets: workflow.dataSets,\n    selected: selectedDataSet,\n    onChange: setSelectedDataSet\n  }), /*#__PURE__*/React.createElement(Display, {\n    workflowName: workflow.displayName,\n    periodId: periodId,\n    organisationUnitId: organisationUnitId,\n    dataSetId: selectedDataSet\n  }));\n};\n\nexport { DataWorkspace };","import { createContext } from 'react';\n\nconst defaultFn = () => {\n  throw new Error('Selection Context has not been initialized');\n};\n\nconst SelectionContext = /*#__PURE__*/createContext({\n  workflow: {},\n  setWorkflow: defaultFn,\n  period: {},\n  setPeriod: defaultFn,\n  orgUnit: {},\n  setOrgUnit: defaultFn\n});\nexport { SelectionContext };","import { IconChevronDown24, IconChevronUp24, colors, Popover, Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef } from 'react';\nimport classes from './context-select.module.css';\n\nconst ContextSelect = ({\n  children,\n  prefix,\n  placeholder,\n  value,\n  onClose,\n  onOpen,\n  disabled,\n  open,\n  requiredValuesMessage\n}) => {\n  const buttonRef = useRef();\n  const Icon = open ? IconChevronUp24 : IconChevronDown24;\n  const button = /*#__PURE__*/React.createElement(\"button\", {\n    ref: buttonRef,\n    className: classes.button,\n    onClick: onOpen,\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.prefix\n  }, prefix), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.value\n  }, value || !disabled && placeholder), /*#__PURE__*/React.createElement(Icon, {\n    color: disabled ? colors.grey600 : undefined\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, disabled ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: requiredValuesMessage,\n    placement: \"bottom\"\n  }, ({\n    ref,\n    onMouseOver,\n    onMouseOut\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    onMouseOver: onMouseOver,\n    onMouseOut: onMouseOut,\n    className: classes.tooltipwrap\n  }, button)) : button, open && /*#__PURE__*/React.createElement(Popover, {\n    reference: buttonRef,\n    arrow: false,\n    placement: \"bottom-end\",\n    onClickOutside: onClose\n  }, children));\n};\n\nContextSelect.propTypes = {\n  children: PropTypes.node.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  prefix: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpen: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  open: PropTypes.bool,\n  requiredValuesMessage: PropTypes.string,\n  value: PropTypes.string\n};\nexport { ContextSelect };","import i18n from '@dhis2/d2-i18n';\n/*\n * This code is copied from the analytics repo as a temporary solution.\n * https://github.com/dhis2/analytics/tree/master/src/components/PeriodDimension/utils\n * In the long term, this period related logic should be moved into its own repo, see:\n * https://jira.dhis2.org/browse/LIBS-193\n * The following changes to the code in the anaytics repo have been implemented:\n *   A. Renamed period-CODE to period-ID\n *   B. Adjusted period type names (values) to match the names in the response from `api/periodTypes`\n *   C. Adjusted period type variable names to equivalent of B, but in UPPER_SNAKE_CASE\n * IMO these changes should be implemented in the period package too\n */\n// Period types\n\nexport const DAILY = 'Daily';\nexport const WEEKLY = 'Weekly';\nexport const WEEKLY_WEDNESDAY = 'WeeklyWednesday';\nexport const WEEKLY_THURSDAY = 'WeeklyThursday';\nexport const WEEKLY_SATURDAY = 'WeeklySaturday';\nexport const WEEKLY_SUNDAY = 'WeeklySunday';\nexport const BI_WEEKLY = 'BiWeekly';\nexport const MONTHLY = 'Monthly';\nexport const BI_MONTHLY = 'BiMonthly';\nexport const QUARTERLY = 'Quarterly';\nexport const SIX_MONTHLY = 'SixMonthly';\nexport const SIX_MONTHLY_APRIL = 'SixMonthlyApril'; // export const SIX_MONTHLY_NOV = 'SixMonthlyNov'\n\nexport const YEARLY = 'Yearly';\nexport const FINANCIAL_APRIL = 'FinancialApril';\nexport const FINANCIAL_JULY = 'FinancialJuly';\nexport const FINANCIAL_OCT = 'FinancialOct';\nexport const FINANCIAL_NOV = 'FinancialNov';\n\nconst getMonthName = key => {\n  const monthNames = [i18n.t('January'), i18n.t('February'), i18n.t('March'), i18n.t('April'), i18n.t('May'), i18n.t('June'), i18n.t('July'), i18n.t('August'), i18n.t('September'), i18n.t('October'), i18n.t('November'), i18n.t('December')];\n  return monthNames[key];\n};\n\nconst getDailyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`01 Jan ${year}`);\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.startDate = formatYyyyMmDd(date);\n      period.endDate = period.startDate;\n      period.displayName = period.startDate;\n      period.iso = period.startDate.replace(/-/g, '');\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getWeeklyPeriodType = (formatYyyyMmDd, weekObj, fnFilter) => {\n  // Calculate the first date of an EPI year base on ISO standard  ( first week always contains 4th Jan )\n  const getEpiWeekStartDay = (year, startDayOfWeek) => {\n    const jan4 = new Date(year, 0, 4);\n    const jan4DayOfWeek = jan4.getDay();\n    const startDate = jan4;\n    const dayDiff = jan4DayOfWeek - startDayOfWeek;\n\n    if (dayDiff > 0) {\n      startDate.setDate(jan4.getDate() - dayDiff);\n    } else if (dayDiff < 0) {\n      startDate.setDate(jan4.getDate() - dayDiff);\n      startDate.setDate(startDate.getDate() - 7);\n    }\n\n    return startDate;\n  };\n\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = getEpiWeekStartDay(year, weekObj.startDay);\n    let week = 1;\n\n    while (date.getFullYear() <= year) {\n      const period = {};\n      period.startDate = formatYyyyMmDd(date);\n      period.iso = `${year}${weekObj.shortName}W${week}`;\n      period.id = period.iso;\n      date.setDate(date.getDate() + 6);\n      period.endDate = formatYyyyMmDd(date);\n      const weekNumber = week;\n      period.displayName = `${i18n.t('Week {{weekNumber}}', {\n        weekNumber\n      })} - ${period.startDate} - ${period.endDate}`; // if end date is Jan 4th or later, week belongs to next year\n\n      if (date.getFullYear() > year && date.getDate() >= 4) {\n        break;\n      }\n\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n      week += 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getBiWeeklyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`01 Jan ${year}`);\n    const day = date.getDay();\n    let biWeek = 1;\n\n    if (day <= 4) {\n      date.setDate(date.getDate() - (day - 1));\n    } else {\n      date.setDate(date.getDate() + (8 - day));\n    }\n\n    while (date.getFullYear() <= year) {\n      const period = {};\n      period.iso = `${year}BiW${biWeek}`;\n      period.id = period.iso;\n      period.startDate = formatYyyyMmDd(date);\n      date.setDate(date.getDate() + 13);\n      period.endDate = formatYyyyMmDd(date);\n      const biWeekNumber = biWeek;\n      period.displayName = `${i18n.t('Bi-Week {{biWeekNumber}}', {\n        biWeekNumber\n      })} - ${period.startDate} - ${period.endDate}`; // if end date is Jan 4th or later, biweek belongs to next year\n\n      if (date.getFullYear() > year && date.getDate() >= 4) {\n        break;\n      }\n\n      periods.push(period);\n      date.setDate(date.getDate() + 1);\n      biWeek += 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getMonthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  const formatIso = date => {\n    const y = date.getFullYear();\n    let m = String(date.getMonth() + 1);\n    m = m.length < 2 ? `0${m}` : m;\n    return y + m;\n  };\n\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Dec ${year}`);\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthName = getMonthName(date.getMonth());\n      period.displayName = `${monthName} ${year}`;\n      period.iso = formatIso(date);\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getBiMonthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Dec ${year}`);\n    let index = 6;\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(0);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthStart = getMonthName(date.getMonth());\n      const monthEnd = getMonthName(date.getMonth() + 1);\n      const fullYear = date.getFullYear();\n      period.displayName = `${monthStart} - ${monthEnd} ${fullYear}`;\n      period.iso = `${year}0${index}B`;\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n      index--;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Bi-months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getQuarterlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Dec ${year}`);\n    let quarter = 4;\n\n    while (date.getFullYear() === year) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setDate(0);\n      date.setDate(0);\n      date.setDate(1);\n      period.startDate = formatYyyyMmDd(date);\n      const monthStart = getMonthName(date.getMonth());\n      const monthEnd = getMonthName(date.getMonth() + 2);\n      const fullYear = date.getFullYear();\n      period.displayName = `${monthStart} - ${monthEnd} ${fullYear}`;\n      period.iso = `${year}Q${quarter}`;\n      period.id = period.iso;\n      periods.push(period);\n      date.setDate(0);\n      quarter -= 1;\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Quarters are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getSixMonthlyPeriodType = fnFilter => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    let period = {};\n    period.startDate = `${year}-01-01`;\n    period.endDate = `${year}-06-30`;\n    period.displayName = `${getMonthName(0)} - ${getMonthName(5)} ${year}`;\n    period.iso = `${year}S1`;\n    period.id = period.iso;\n    periods.push(period);\n    period = {};\n    period.startDate = `${year}-07-01`;\n    period.endDate = `${year}-12-31`;\n    period.displayName = `${getMonthName(6)} - ${getMonthName(11)} ${year}`;\n    period.iso = `${year}S2`;\n    period.id = period.iso;\n    periods.push(period);\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getSixMonthlyAprilPeriodType = fnFilter => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    let period = {};\n    period.startDate = `${year}-04-01`;\n    period.endDate = `${year}-09-30`;\n    period.displayName = `${getMonthName(3)} - ${getMonthName(8)} ${year}`;\n    period.iso = `${year}AprilS1`;\n    period.id = period.iso;\n    periods.push(period);\n    period = {};\n    period.startDate = `${year}-10-01`;\n    period.endDate = `${year + 1}-03-31`;\n    period.displayName = `${getMonthName(9)} ${year} - ${getMonthName(2)} ${year + 1}`;\n    period.iso = `${year}AprilS2`;\n    period.id = period.iso;\n    periods.push(period);\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods.reverse() : periods;\n    return periods;\n  };\n};\n\nconst getYearlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Dec ${year}`);\n\n    while (year - date.getFullYear() < 10) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setMonth(0, 1);\n      period.startDate = formatYyyyMmDd(date);\n      const dateString = date.getFullYear().toString();\n      period.displayName = dateString;\n      period.iso = date.getFullYear().toString();\n      period.id = period.iso.toString();\n      periods.push(period);\n      date.setDate(0);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // Years are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialOctoberPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`30 Sep ${year + 1}`);\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = `${getMonthName(9)} ${yearStart} - ${getMonthName(8)} ${yearEnd}`;\n      period.id = `${date.getFullYear()}Oct`;\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialOctober periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialNovemberPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Oct ${year + 1}`);\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = `${getMonthName(10)} ${yearStart} - ${getMonthName(9)} ${yearEnd}`;\n      period.id = `${date.getFullYear()}Nov`;\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialNovember periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialJulyPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`30 Jun ${year + 1}`);\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = `${getMonthName(6)} ${yearStart} - ${getMonthName(5)} ${yearEnd}`;\n      period.id = `${date.getFullYear()}July`;\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialJuly periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst getFinancialAprilPeriodType = (formatYyyyMmDd, fnFilter) => {\n  return config => {\n    let periods = [];\n    const offset = parseInt(config.offset, 10);\n    const isFilter = config.filterFuturePeriods;\n    const isReverse = config.reversePeriods;\n    const year = new Date(Date.now()).getFullYear() + offset;\n    const date = new Date(`31 Mar ${year + 1}`);\n\n    for (let i = 0; i < 10; i++) {\n      const period = {};\n      period.endDate = formatYyyyMmDd(date);\n      date.setYear(date.getFullYear() - 1);\n      date.setDate(date.getDate() + 1);\n      period.startDate = formatYyyyMmDd(date);\n      const yearStart = date.getFullYear();\n      const yearEnd = date.getFullYear() + 1;\n      period.displayName = `${getMonthName(3)} ${yearStart} - ${getMonthName(2)} ${yearEnd}`;\n      period.id = `${date.getFullYear()}April`;\n      periods.push(period);\n      date.setDate(date.getDate() - 1);\n    }\n\n    periods = isFilter ? fnFilter(periods) : periods;\n    periods = isReverse ? periods : periods.reverse(); // FinancialApril periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n    return periods;\n  };\n};\n\nconst formatYyyyMmDd = date => {\n  const y = date.getFullYear();\n  let m = String(date.getMonth() + 1);\n  let d = String(date.getDate());\n  m = m.length < 2 ? `0${m}` : m;\n  d = d.length < 2 ? `0${d}` : d;\n  return `${y}-${m}-${d}`;\n};\n\nconst filterFuturePeriods = periods => {\n  const array = [];\n  const now = new Date(Date.now());\n\n  for (let i = 0; i < periods.length; i++) {\n    if (new Date(periods[i].startDate) <= now) {\n      array.push(periods[i]);\n    }\n  }\n\n  return array;\n};\n\nexport const getFixedPeriodTypes = () => [{\n  type: DAILY,\n  regex: /^([0-9]{4})([0-9]{2})([0-9]{2})$/,\n  // YYYYMMDD\n  getPeriods: getDailyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Daily')\n}, {\n  type: WEEKLY,\n  regex: /^([0-9]{4})()W([0-9]{1,2})$/,\n  // YYYY\"W\"[1-53]\n  getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n    shortName: '',\n    startDay: 1\n  }, filterFuturePeriods),\n  displayName: i18n.t('Weekly')\n}, {\n  type: WEEKLY_WEDNESDAY,\n  regex: /^([0-9]{4})(Wed)W([0-9]{1,2})$/,\n  // YYYY\"WedW\"[1-53]\n  getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n    shortName: 'Wed',\n    startDay: 3\n  }, filterFuturePeriods),\n  displayName: i18n.t('Weekly (Start Wednesday)')\n}, {\n  type: WEEKLY_THURSDAY,\n  regex: /^([0-9]{4})(Thu)W([0-9]{1,2})$/,\n  // YYYY\"ThuW\"[1-53]\n  getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n    shortName: 'Thu',\n    startDay: 4\n  }, filterFuturePeriods),\n  displayName: i18n.t('Weekly (Start Thursday)')\n}, {\n  type: WEEKLY_SATURDAY,\n  regex: /^([0-9]{4})(Sat)W([0-9]{1,2})$/,\n  // YYYY\"SatW\"[1-53]\n  getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n    shortName: 'Sat',\n    startDay: 6\n  }, filterFuturePeriods),\n  displayName: i18n.t('Weekly (Start Saturday)')\n}, {\n  type: WEEKLY_SUNDAY,\n  regex: /^([0-9]{4})(Sun)W([0-9]{1,2})$/,\n  // YYYY\"SunW\"[1-53]\n  getPeriods: getWeeklyPeriodType(formatYyyyMmDd, {\n    shortName: 'Sun',\n    startDay: 7\n  }, filterFuturePeriods),\n  displayName: i18n.t('Weekly (Start Sunday)')\n}, {\n  type: BI_WEEKLY,\n  regex: /^([0-9]{4})BiW([0-9]{1,2})$/,\n  // YYYY\"BiW\"[1-27]\n  getPeriods: getBiWeeklyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Bi-weekly')\n}, {\n  type: MONTHLY,\n  regex: /^([0-9]{4})([0-9]{2})$/,\n  // YYYYMM\n  getPeriods: getMonthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Monthly')\n}, {\n  type: BI_MONTHLY,\n  regex: /^([0-9]{4})([0-9]{2})B$/,\n  // YYYY0[1-6]\"B\"\n  getPeriods: getBiMonthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Bi-monthly')\n}, {\n  type: QUARTERLY,\n  regex: /^([0-9]{4})Q([1234])$/,\n  // YYYY\"Q\"[1-4]\n  getPeriods: getQuarterlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Quarterly')\n}, {\n  type: SIX_MONTHLY,\n  regex: /^([0-9]{4})S([12])$/,\n  // YYYY\"S\"[1/2]\n  getPeriods: getSixMonthlyPeriodType(filterFuturePeriods),\n  displayName: i18n.t('Six-monthly')\n}, {\n  type: SIX_MONTHLY_APRIL,\n  regex: /^([0-9]{4})AprilS([12])$/,\n  // YYYY\"AprilS\"[1/2]\n  getPeriods: getSixMonthlyAprilPeriodType(filterFuturePeriods),\n  displayName: i18n.t('Six-monthly April')\n}, {\n  type: YEARLY,\n  regex: /^([0-9]{4})$/,\n  // YYYY\n  getPeriods: getYearlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Yearly')\n}, {\n  type: FINANCIAL_NOV,\n  regex: /^([0-9]{4})Nov$/,\n  // YYYY\"Nov\"\n  getPeriods: getFinancialNovemberPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Financial year (Start November)')\n}, {\n  type: FINANCIAL_OCT,\n  regex: /^([0-9]{4})Oct$/,\n  // YYYY\"Oct\"\n  getPeriods: getFinancialOctoberPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Financial year (Start October)')\n}, {\n  type: FINANCIAL_JULY,\n  regex: /^([0-9]{4})July$/,\n  // YYYY\"July\"\n  getPeriods: getFinancialJulyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Financial year (Start July)')\n}, {\n  type: FINANCIAL_APRIL,\n  regex: /^([0-9]{4})April$/,\n  // YYYY\"April\"\n  getPeriods: getFinancialAprilPeriodType(formatYyyyMmDd, filterFuturePeriods),\n  displayName: i18n.t('Financial year (Start April)')\n}];\nexport const getFixedPeriodType = type => getFixedPeriodTypes().find(option => option.type === type);\nexport const getYearOffsetFromNow = year => year - new Date(Date.now()).getFullYear();\nexport const getFixedPeriodsByTypeAndYear = (type, year) => {\n  const periodType = getFixedPeriodType(type);\n  const offset = getYearOffsetFromNow(year);\n  return periodType && Number.isInteger(offset) ? periodType.getPeriods({\n    offset\n  }) : undefined;\n};\nexport const parsePeriodId = (id, allowedTypes) => {\n  const periodTypes = allowedTypes ? getFixedPeriodTypes().filter(({\n    type\n  }) => allowedTypes.some(allowedType => allowedType === type)) : getFixedPeriodTypes();\n  let i = 0;\n  let periodType = undefined;\n  let match = undefined;\n\n  while (i < periodTypes.length && !match) {\n    periodType = periodTypes[i];\n    match = id.match(periodType.regex);\n    i++;\n  }\n\n  if (!match) {\n    return undefined;\n  }\n\n  const year = parseInt(match[1]);\n  const offset = getYearOffsetFromNow(year);\n  const periods = periodType.getPeriods({\n    offset\n  });\n  const period = periods.find(period => period.id === id);\n  return { ...period,\n\n    /*\n     * Add year and periodType so a parsed period code\n     * can be use for a multitude of purposes\n     */\n    year,\n    periodType\n  };\n};\nexport const getFixedPeriodsForTypeAndDateRange = (type, startDate, endDate) => {\n  // Allow dates and date-strings\n  startDate = startDate instanceof Date ? startDate : new Date(startDate);\n  endDate = endDate instanceof Date ? endDate : new Date(endDate);\n  let year = endDate.getFullYear();\n  let startDateReached = false;\n  const convertedPeriods = [];\n\n  while (!startDateReached) {\n    getFixedPeriodsByTypeAndYear(type, year).reverse().forEach(period => {\n      const periodEnd = new Date(period.endDate); // exclude periods that end before start date\n\n      const endsAfterPeriodStart = periodEnd >= startDate; // exclude periods that end after end date\n\n      const endsBeforePeriodEnd = periodEnd <= endDate;\n\n      if (!endsAfterPeriodStart) {\n        startDateReached = true;\n      }\n\n      if (endsAfterPeriodStart && endsBeforePeriodEnd) {\n        convertedPeriods.push(period);\n      }\n    });\n    --year;\n  }\n\n  return convertedPeriods.reverse();\n};\nconst FIXED_PERIODS_BY_LENGTH = [[DAILY], [WEEKLY, WEEKLY_WEDNESDAY, WEEKLY_THURSDAY, WEEKLY_SATURDAY, WEEKLY_SUNDAY], [BI_WEEKLY], [MONTHLY], [BI_MONTHLY], [QUARTERLY], [SIX_MONTHLY, SIX_MONTHLY_APRIL], [YEARLY, FINANCIAL_APRIL, FINANCIAL_JULY, FINANCIAL_OCT, FINANCIAL_NOV]];\nexport const PERIOD_GREATER = 1;\nexport const PERIOD_EQUAL = 0;\nexport const PERIOD_SHORTER = -1;\n/*\n * IF left < right THEN return  1\n * IF left > right THEN return -1\n * IF left = right THEN return  0\n *\n * Why right > left = 1 and not the other way?\n * When partially applying this function, it makes sense this way:\n *\n * const compareWithWeekly = partial(compareFixedPeriodLength, 'WEEKLY')\n * const isGreater = compareWithWeekly('YEARLY') === PERIOD_GREATER\n * -> isGreater is true\n *\n * @param {string} right\n * @param {string} left\n * @returns {Int}\n */\n\nexport const compareFixedPeriodLength = (left, right) => {\n  const leftIndex = FIXED_PERIODS_BY_LENGTH.findIndex(types => types.includes(left));\n  const rightIndex = FIXED_PERIODS_BY_LENGTH.findIndex(types => types.includes(right));\n  if (leftIndex === rightIndex) return PERIOD_EQUAL;\n  return leftIndex > rightIndex ? PERIOD_SHORTER : PERIOD_GREATER;\n};\nexport const getCurrentPeriodForType = type => {\n  const currentDate = new Date();\n  let year = currentDate.getFullYear(); // cover this and the next years as that\n  // should cover all existing period types\n\n  for (let i = 0; i < 2; ++i) {\n    const periods = getFixedPeriodsByTypeAndYear(type, year).reverse();\n\n    for (const period of periods) {\n      const periodStart = new Date(period.startDate);\n      const periodEnd = new Date(period.endDate);\n      const endsBeforePeriodEnd = currentDate <= periodEnd;\n      const startsAfterPeriodStart = currentDate >= periodStart;\n\n      if (endsBeforePeriodEnd && startsAfterPeriodStart) {\n        return period;\n      }\n    }\n\n    ++year;\n  }\n\n  return null;\n};\nexport const isGreaterPeriodTypeEndDateWithinShorterPeriod = (greaterPeriodType, shorterPeriod) => {\n  const greaterPeriod = getCurrentPeriodForType(greaterPeriodType);\n  const greaterPeriodEndDate = new Date(greaterPeriod.endDate);\n  const shorterPeriodEndDate = new Date(shorterPeriod.endDate);\n  const shorterPeriodStartDate = new Date(shorterPeriod.startDate);\n  const greaterEndsAfterShorterStarts = greaterPeriodEndDate >= shorterPeriodStartDate;\n  const greaterEndsBeforeShorterEnds = greaterPeriodEndDate <= shorterPeriodEndDate;\n  return greaterEndsAfterShorterStarts && greaterEndsBeforeShorterEnds;\n};","import { Menu, MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { createHref } from '../../navigation/index.js';\nimport { useSelectionContext } from '../selection-context/index.js';\nimport { getFixedPeriodsByTypeAndYear } from './fixed-periods.js';\nimport classes from './period-menu.module.css';\n\nconst PeriodMenu = ({\n  periodType,\n  year\n}) => {\n  const {\n    workflow,\n    period: selectedPeriod,\n    orgUnit,\n    selectPeriod\n  } = useSelectionContext();\n  const periods = getFixedPeriodsByTypeAndYear(periodType, year);\n  return /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    className: classes.menu\n  }, periods.map(period => /*#__PURE__*/React.createElement(MenuItem, {\n    active: period.id === selectedPeriod.id,\n    key: period.id,\n    href: createHref({\n      wf: workflow.id,\n      ou: orgUnit.path,\n      pe: period.id\n    }),\n    label: period.displayName,\n    onClick: () => selectPeriod(period)\n  })));\n};\n\nPeriodMenu.propTypes = {\n  periodType: PropTypes.string,\n  year: PropTypes.number\n};\nexport { PeriodMenu };","import { Button, IconArrowRight24, IconArrowLeft24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './year-navigator.module.css';\nexport const currentYear = new Date().getFullYear(); // To avoid users from navigating too far back\n\nconst startYear = 1970;\n\nconst YearNavigator = ({\n  year,\n  onYearChange\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: classes.container\n}, /*#__PURE__*/React.createElement(Button, {\n  disabled: year === startYear,\n  onClick: () => onYearChange(year - 1),\n  icon: /*#__PURE__*/React.createElement(IconArrowLeft24, null)\n}), /*#__PURE__*/React.createElement(\"span\", {\n  className: classes.year\n}, year), /*#__PURE__*/React.createElement(Button, {\n  disabled: year === currentYear,\n  onClick: () => onYearChange(year + 1),\n  icon: /*#__PURE__*/React.createElement(IconArrowRight24, null)\n}));\n\nYearNavigator.propTypes = {\n  year: PropTypes.number.isRequired,\n  onYearChange: PropTypes.func\n};\nexport { YearNavigator };","import i18n from '@dhis2/d2-i18n';\nimport React, { useEffect, useState } from 'react';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelectionContext } from '../selection-context/index.js';\nimport { PeriodMenu } from './period-menu.js';\nimport { YearNavigator, currentYear } from './year-navigator.js';\nexport const PERIOD = 'PERIOD';\n\nconst PeriodSelect = () => {\n  const {\n    period,\n    workflow,\n    selectPeriod,\n    openedSelect,\n    setOpenedSelect\n  } = useSelectionContext();\n  const [year, setYear] = useState(period.year || currentYear);\n  const open = openedSelect === PERIOD;\n  const value = period.displayName;\n  useEffect(() => {\n    if (period.year) {\n      setYear(period.year);\n    }\n  }, [period]);\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    prefix: i18n.t('Period'),\n    placeholder: i18n.t('Choose a period'),\n    value: value,\n    open: open,\n    disabled: !workflow.id,\n    onOpen: () => setOpenedSelect(PERIOD),\n    onClose: () => setOpenedSelect(''),\n    requiredValuesMessage: i18n.t('Choose a workflow first')\n  }, /*#__PURE__*/React.createElement(YearNavigator, {\n    year: year,\n    onYearChange: year => {\n      selectPeriod({});\n      setYear(year);\n    }\n  }), /*#__PURE__*/React.createElement(PeriodMenu, {\n    periodType: workflow.periodType,\n    year: year\n  }));\n};\n\nexport { PeriodSelect };","import { readQueryParams } from '../../navigation/index.js';\nimport { parsePeriodId } from '../period-select/index.js';\nexport const initialValues = workflows => {\n  const {\n    wf,\n    pe,\n    ou,\n    ouDisplayName\n  } = readQueryParams();\n  const workflow = initialWorkflowValue(workflows, wf);\n  const period = initialPeriodValue(pe, workflow);\n  const orgUnit = initialOrgUnitValue(ou, ouDisplayName);\n  return {\n    workflow,\n    period,\n    orgUnit\n  };\n};\nexport const initialWorkflowValue = (workflows, workflowId) => {\n  if (workflowId) {\n    /*\n     * Auto select workflow with query param id\n     * default to empty object if `find` returns undefined in case the\n     * workflow with the id from the url is not available to the user\n     */\n    return workflows.find(workflow => workflow.id === workflowId) || {};\n  }\n\n  if (workflows.length === 1) {\n    // auto-select if user only has one workflow\n    return workflows[0];\n  }\n\n  return {};\n};\nexport const initialPeriodValue = (periodId, initialWorkflow = {}) => {\n  if (!periodId || !initialWorkflow.id) {\n    return {};\n  }\n\n  return parsePeriodId(periodId, [initialWorkflow.periodType]) || {};\n};\nexport const initialOrgUnitValue = (path, displayName) => {\n  return path && displayName ? {\n    path,\n    displayName\n  } : {};\n};","import { PropTypes } from '@dhis2/prop-types';\nimport React, { useEffect, useReducer } from 'react';\nimport { useAppContext } from '../../app-context/index.js';\nimport { pushStateToHistory } from '../../navigation/index.js';\nimport { initialValues, initialWorkflowValue } from './initial-values.js';\nimport { SelectionContext } from './selection-context.js';\nconst ACTIONS = {\n  SET_OPENED_SELECT: 'SET_OPENED_SELECT',\n  CLEAR_ALL: 'CLEAR_ALL',\n  SELECT_WORKFLOW: 'SELECT_WORKFLOW',\n  SELECT_PERIOD: 'SELECT_PERIOD',\n  SELECT_ORG_UNIT: 'SELECT_ORG_UNIT',\n  SET_STATE_FROM_QUERY_PARAMS: 'SET_STATE_FROM_QUERY_PARAMS'\n};\n\nconst reducer = (state, {\n  type,\n  payload\n}) => {\n  switch (type) {\n    case ACTIONS.SET_OPENED_SELECT:\n      return { ...state,\n        openedSelect: payload.openedSelect\n      };\n\n    case ACTIONS.CLEAR_ALL:\n      return {\n        openedSelect: '',\n        workflow: payload.workflow,\n        period: {},\n        orgUnit: {}\n      };\n\n    case ACTIONS.SELECT_WORKFLOW:\n      return { ...state,\n        openedSelect: '',\n        workflow: payload.workflow,\n        period: state.workflow && state.workflow.periodType === payload.workflow.periodType ? state.period : {}\n      };\n\n    case ACTIONS.SELECT_PERIOD:\n      return { ...state,\n\n        /*\n         * Close dropdown only if selecting a period,\n         * not when unsetting it when the year changes\n         */\n        openedSelect: payload.period.id ? '' : state.openedSelect,\n        period: payload.period\n      };\n\n    case ACTIONS.SELECT_ORG_UNIT:\n      return { ...state,\n        openedSelect: '',\n        orgUnit: payload.orgUnit\n      };\n\n    case ACTIONS.SET_STATE_FROM_QUERY_PARAMS:\n      return {\n        openedSelect: '',\n        ...initialValues(payload.dataApprovalWorkflows)\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst SelectionProvider = ({\n  children\n}) => {\n  const {\n    dataApprovalWorkflows\n  } = useAppContext();\n  const [{\n    openedSelect,\n    workflow,\n    period,\n    orgUnit\n  }, dispatch] = useReducer(reducer, {\n    openedSelect: '',\n    ...initialValues(dataApprovalWorkflows)\n  });\n  const providerValue = {\n    workflow,\n    period,\n    orgUnit,\n    openedSelect,\n    clearAll: () => dispatch({\n      type: ACTIONS.CLEAR_ALL,\n      payload: {\n        workflow: initialWorkflowValue(dataApprovalWorkflows)\n      }\n    }),\n    setOpenedSelect: fieldName => dispatch({\n      type: ACTIONS.SET_OPENED_SELECT,\n      payload: {\n        openedSelect: fieldName\n      }\n    }),\n    selectWorkflow: workflow => dispatch({\n      type: ACTIONS.SELECT_WORKFLOW,\n      payload: {\n        workflow\n      }\n    }),\n    selectPeriod: period => dispatch({\n      type: ACTIONS.SELECT_PERIOD,\n      payload: {\n        period\n      }\n    }),\n    selectOrgUnit: orgUnit => dispatch({\n      type: ACTIONS.SELECT_ORG_UNIT,\n      payload: {\n        orgUnit\n      }\n    })\n  };\n  useEffect(() => {\n    pushStateToHistory({\n      workflow,\n      period,\n      orgUnit\n    });\n  }, [workflow, period, orgUnit]);\n  useEffect(() => {\n    const setStateFromQueryParams = () => {\n      dispatch({\n        type: ACTIONS.SET_STATE_FROM_QUERY_PARAMS,\n        payload: {\n          dataApprovalWorkflows\n        }\n      });\n    };\n\n    window.addEventListener('popstate', setStateFromQueryParams);\n    return () => {\n      window.removeEventListener('popstate', setStateFromQueryParams);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(SelectionContext.Provider, {\n    value: providerValue\n  }, children);\n};\n\nSelectionProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { SelectionProvider };","import { stringify } from 'query-string';\nimport { history } from './history.js';\nexport const pushStateToHistory = state => {\n  const paramString = stringify({\n    wf: state.workflow.id,\n    pe: state.period.id,\n    ou: state.orgUnit.path,\n    ouDisplayName: state.orgUnit.displayName\n  });\n  const search = paramString ? `?${paramString}` : ''; // Only push if the search string changes\n\n  if (search !== history.location.search) {\n    history.push({\n      pathname: '/',\n      search\n    });\n  }\n};","import { useContext } from 'react';\nimport { SelectionContext } from './selection-context.js';\nexport const useSelectionContext = () => useContext(SelectionContext);","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React from 'react';\nimport { useSelectionContext } from '../selection-context/index.js';\nimport classes from './clear-all-button.module.css';\n\nconst ClearAllButton = () => {\n  const {\n    clearAll,\n    period,\n    orgUnit\n  } = useSelectionContext();\n  return period.id || orgUnit.path ? /*#__PURE__*/React.createElement(Button, {\n    className: classes.button,\n    secondary: true,\n    onClick: clearAll\n  }, i18n.t('Clear selections')) : null;\n};\n\nexport { ClearAllButton };","import i18n from '@dhis2/d2-i18n';\nimport { OrganisationUnitTree } from '@dhis2/ui';\nimport React from 'react';\nimport { useAppContext } from '../../app-context/index.js';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelectionContext } from '../selection-context/index.js';\nimport classes from './org-unit-select.module.css';\nexport const ORG_UNIT = 'ORG_UNIT';\n\nconst OrgUnitSelect = () => {\n  const {\n    organisationUnits\n  } = useAppContext();\n  const {\n    orgUnit,\n    selectOrgUnit,\n    workflow,\n    period,\n    openedSelect,\n    setOpenedSelect\n  } = useSelectionContext();\n  const open = openedSelect === ORG_UNIT;\n  const value = orgUnit.displayName;\n  const requiredValuesMessage = workflow.id ? i18n.t('Choose a period first') : i18n.t('Choose a workflow and period first');\n  const roots = organisationUnits.map(({\n    id\n  }) => id);\n\n  const onChange = ({\n    displayName,\n    id,\n    path\n  }) => {\n    selectOrgUnit({\n      displayName,\n      id,\n      path\n    });\n  };\n\n  const selectedOrgUnitPath = orgUnit.path ? [orgUnit.path] : undefined;\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    prefix: i18n.t('Organisation Unit'),\n    placeholder: i18n.t('Choose an organisation unit'),\n    value: value,\n    open: open,\n    disabled: !(workflow.id && period.id),\n    onOpen: () => setOpenedSelect(ORG_UNIT),\n    onClose: () => setOpenedSelect(''),\n    requiredValuesMessage: requiredValuesMessage\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.scrollbox\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: roots,\n    onChange: onChange,\n    initiallyExpanded: selectedOrgUnitPath,\n    selected: selectedOrgUnitPath,\n    singleSelection: true\n  })));\n};\n\nexport { OrgUnitSelect };","import { MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { createHref } from '../../navigation/index.js';\nimport classes from './workflow-select-option.module.css';\n\nconst WorkflowSelectOption = ({\n  id,\n  name,\n  periodType,\n  active,\n  onClick\n}) => {\n  const label = /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.option\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.title\n  }, name), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.subtitle\n  }, periodType || 'UNAVAILABLE'));\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    href: createHref({\n      wf: id\n    }),\n    className: classes.bordered,\n    active: active,\n    onClick: onClick,\n    label: label\n  });\n};\n\nWorkflowSelectOption.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  active: PropTypes.bool,\n  periodType: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport { WorkflowSelectOption };","import i18n from '@dhis2/d2-i18n';\nimport { Menu } from '@dhis2/ui';\nimport React from 'react';\nimport { useAppContext } from '../../app-context/index.js';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelectionContext } from '../selection-context/index.js';\nimport { WorkflowSelectOption } from './workflow-select-option.js';\nimport classes from './workflow-select.module.css';\nconst WORKFLOW = 'WORKFLOW';\n\nconst WorkflowSelect = () => {\n  const {\n    dataApprovalWorkflows\n  } = useAppContext();\n  const {\n    workflow: selectedWorkflow,\n    selectWorkflow,\n    openedSelect,\n    setOpenedSelect\n  } = useSelectionContext();\n  const open = openedSelect === WORKFLOW;\n  const value = selectedWorkflow.displayName;\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    prefix: i18n.t('Workflow'),\n    placeholder: i18n.t('Choose a workflow'),\n    value: value,\n    open: open,\n    onOpen: () => setOpenedSelect(WORKFLOW),\n    onClose: () => setOpenedSelect('')\n  }, dataApprovalWorkflows.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.message\n  }, i18n.t('No workflows found. None may exist, or you may not have access to any.')) : /*#__PURE__*/React.createElement(Menu, null, dataApprovalWorkflows.map(workflow => /*#__PURE__*/React.createElement(WorkflowSelectOption, {\n    key: workflow.id,\n    id: workflow.id,\n    name: workflow.displayName,\n    periodType: workflow.periodType,\n    active: workflow.id === selectedWorkflow.id,\n    onClick: () => selectWorkflow(workflow)\n  }))));\n};\n\nexport { WorkflowSelect, WORKFLOW };","import React from 'react';\nimport { ClearAllButton } from './clear-all-button/index.js';\nimport { OrgUnitSelect } from './org-unit-select/index.js';\nimport { PeriodSelect } from './period-select/index.js';\nimport { SelectionProvider } from './selection-context/index.js';\nimport { WorkflowSelect } from './workflow-select/index.js';\n\nconst TopBar = () => /*#__PURE__*/React.createElement(SelectionProvider, null, /*#__PURE__*/React.createElement(WorkflowSelect, null), /*#__PURE__*/React.createElement(PeriodSelect, null), /*#__PURE__*/React.createElement(OrgUnitSelect, null), /*#__PURE__*/React.createElement(ClearAllButton, null));\n\nexport { TopBar };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './layout.module.css';\n\nconst LayoutSection = ({\n  children,\n  className\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: className\n}, children);\n\nLayoutSection.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n\nconst Container = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.container\n}));\n\nconst Top = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.top\n}));\n\nconst Content = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.content\n}));\n\nconst Bottom = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.bottom\n}));\n\nexport const Layout = {\n  Container,\n  Top,\n  Content,\n  Bottom\n};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport enTranslations from './en/translations.json';\nconst namespace = 'default';\ni18n.addResources('en', namespace, enTranslations);\nexport default i18n;","import { App } from './app.js';\nimport '../locales/index.js';\nexport default App;","import { CssVariables } from '@dhis2/ui';\nimport React from 'react';\nimport { AppProvider } from '../app-context/index.js';\nimport { AuthWall } from '../auth/index.js';\nimport { BottomBar } from '../bottom-bar/index.js';\nimport { DataWorkspace } from '../data-workspace/index.js';\nimport { TopBar } from '../top-bar/index.js';\nimport { WorkflowProvider } from '../workflow-context/index.js';\nimport { Layout } from './layout.js';\n\nconst App = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  colors: true,\n  theme: true\n}), /*#__PURE__*/React.createElement(AppProvider, null, /*#__PURE__*/React.createElement(AuthWall, null, /*#__PURE__*/React.createElement(Layout.Container, null, /*#__PURE__*/React.createElement(Layout.Top, null, /*#__PURE__*/React.createElement(TopBar, null)), /*#__PURE__*/React.createElement(WorkflowProvider, null, /*#__PURE__*/React.createElement(Layout.Content, null, /*#__PURE__*/React.createElement(DataWorkspace, null)), /*#__PURE__*/React.createElement(Layout.Bottom, null, /*#__PURE__*/React.createElement(BottomBar, null)))))));\n\nexport { App };"],"sourceRoot":""}