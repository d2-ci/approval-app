{"version":3,"sources":["D2App/auth/auth-wall.module.css","D2App/top-bar/clear-all-button/clear-all-button.module.css","D2App/top-bar/context-select/context-select.module.css","D2App/top-bar/workflow-select/workflow-select-option.module.css","D2App/top-bar/workflow-select/workflow-select.module.css","D2App/app/layout.module.css","D2App/current-user/current-user-context.js","D2App/current-user/current-user-provider.js","D2App/current-user/use-current-user.js","D2App/auth/auth-wall.js","D2App/auth/use-is-authorized.js","D2App/bottom-bar/bottom-bar.js","D2App/data-workspace/data-workspace.js","D2App/top-bar/selection/selection-context.js","D2App/top-bar/selection/selection-provider.js","D2App/top-bar/selection/use-selection.js","D2App/top-bar/clear-all-button/clear-all-button.js","D2App/top-bar/context-select/context-select.js","D2App/top-bar/org-unit-select/org-unit-select.js","D2App/top-bar/period-select/period-select.js","D2App/top-bar/workflow-select/workflow-select-option.js","D2App/top-bar/workflow-select/workflow-select.js","D2App/top-bar/top-bar.js","D2App/app/layout.js","D2App/app/index.js","D2App/app/app.js"],"names":["module","exports","CurrentUserContext","createContext","meQuery","me","resource","params","fields","dataApprovalWorkflowsQuery","dataApprovalWorkflows","id","CurrentUserProvider","children","data","workflowsData","loading","workflowsLoading","error","workflowsError","refetch","refetchWorkflows","called","workflowsCalled","useDataQuery","lazy","meData","meLoading","meError","onComplete","React","createElement","Layer","CenteredContent","CircularLoader","Provider","value","useCurrentUser","useContext","AuthWall","authorities","some","authority","useIsAuthorized","className","classes","wrapper","NoticeBox","title","i18n","t","BottomBar","DataWorkspace","noop","SelectionContext","workflow","setWorkflow","period","setPeriod","orgUnit","setOrgUnit","SelectionProvider","query","setQuery","useQueryParams","wf","StringParam","pe","ou","openedSelect","setOpenedSelect","useState","find","code","name","useEffect","providerValue","clearAll","selectWorkflow","selectPeriod","selectOrgUnit","useSelection","ClearAllButton","Button","button","secondary","onClick","ContextSelect","label","onClose","onOpen","disabled","open","ref","useRef","Icon","IconChevronUp24","IconChevronDown24","Fragment","prefix","color","colors","grey600","undefined","Popover","reference","arrow","placement","onClickOutside","ORG_UNIT","OrgUnitSelect","PERIOD","PeriodSelect","WorkflowSelectOption","periodType","active","option","subtitle","MenuItem","bordered","WORKFLOW","WorkflowSelect","selectedWorkflow","length","message","Menu","map","key","TopBar","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","this","LayoutSection","Layout","props","container","top","content","bottom","App","QueryParamProvider","CssVariables","spacers","theme"],"mappings":"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","file":"static/js/app.5e04cf8a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"auth-wall_wrapper__2MmQe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"clear-all-button_button__mDEHm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"context-select_button__1y8va\",\"prefix\":\"context-select_prefix__3xDFu\",\"value\":\"context-select_value__oltZj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bordered\":\"workflow-select-option_bordered__JBAIX\",\"option\":\"workflow-select-option_option__1cqTS\",\"title\":\"workflow-select-option_title__3zrtv\",\"subtitle\":\"workflow-select-option_subtitle__3yrup\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"workflow-select_message__1jq5N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"layout_container__Cp-96\",\"top\":\"layout_top__2gcI9\",\"content\":\"layout_content__10QOH\",\"bottom\":\"layout_bottom__2toTd\"};","import { createContext } from 'react';\nconst CurrentUserContext = /*#__PURE__*/createContext({});\nexport { CurrentUserContext };","import { useDataQuery } from '@dhis2/app-runtime';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { CircularLoader, Layer, CenteredContent } from '@dhis2/ui';\nimport React from 'react';\nimport { CurrentUserContext } from './current-user-context.js';\nconst meQuery = {\n  me: {\n    resource: 'me',\n    params: {\n      fields: ['id', 'authorities', 'programs', 'dataSets', 'userGroups', 'organisationUnits', 'dataViewOrganisationUnits']\n    }\n  }\n};\nconst dataApprovalWorkflowsQuery = {\n  dataApprovalWorkflows: {\n    resource: 'users',\n    id: ({\n      id\n    }) => `${id}/dataApprovalWorkflows`\n  }\n};\n\nconst CurrentUserProvider = ({\n  children\n}) => {\n  const {\n    data: workflowsData,\n    loading: workflowsLoading,\n    error: workflowsError,\n    refetch: refetchWorkflows,\n    called: workflowsCalled\n  } = useDataQuery(dataApprovalWorkflowsQuery, {\n    lazy: true\n  });\n  const {\n    data: meData,\n    loading: meLoading,\n    error: meError\n  } = useDataQuery(meQuery, {\n    onComplete: ({\n      me: {\n        id\n      }\n    }) => refetchWorkflows({\n      id\n    })\n  });\n  const loading = !workflowsCalled || workflowsLoading || meLoading;\n  const error = !loading && (workflowsError || meError);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n\n  if (error) {\n    /**\n     * The app can't continue if this fails, because it doesn't\n     * have any data, so throw the error and let it be caught by\n     * the error boundary in the app-shell\n     */\n    throw error;\n  }\n\n  return /*#__PURE__*/React.createElement(CurrentUserContext.Provider, {\n    value: { ...meData.me,\n      ...workflowsData.dataApprovalWorkflows\n    }\n  }, children);\n};\n\nCurrentUserProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { CurrentUserProvider };","import { useContext } from 'react';\nimport { CurrentUserContext } from './current-user-context.js';\nexport const useCurrentUser = () => useContext(CurrentUserContext);","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './auth-wall.module.css';\nimport { useIsAuthorized } from './use-is-authorized.js';\n\nconst AuthWall = ({\n  children\n}) => {\n  const isAuthorized = useIsAuthorized();\n\n  if (!isAuthorized) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.wrapper\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Not authorized')\n    }, i18n.t(\"You don't have access to the Data Approval App. Contact a system administrator to request access.\")));\n  }\n\n  return children;\n};\n\nAuthWall.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { AuthWall };","import { useCurrentUser } from '../current-user/index.js';\nexport const useIsAuthorized = () => {\n  const {\n    authorities\n  } = useCurrentUser();\n  return authorities.some(authority => authority === 'ALL' || authority === 'M_dhis-web-approval');\n};","import React from 'react';\n\nconst BottomBar = () => /*#__PURE__*/React.createElement(\"pre\", null, \"BottomBar placeholder\");\n\nexport { BottomBar };","import React from 'react';\n\nconst DataWorkspace = () => /*#__PURE__*/React.createElement(\"pre\", null, \"DataWorkspace placeholder\");\n\nexport { DataWorkspace };","import { createContext } from 'react';\n\nconst noop = () => {};\n\nconst SelectionContext = /*#__PURE__*/createContext({\n  workflow: {},\n  setWorkflow: noop,\n  period: {},\n  setPeriod: noop,\n  orgUnit: {},\n  setOrgUnit: noop\n});\nexport { SelectionContext };","import { PropTypes } from '@dhis2/prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { useQueryParams, StringParam } from 'use-query-params';\nimport { useCurrentUser } from '../../current-user/index.js';\nimport { SelectionContext } from './selection-context.js'; // TODO: should take a periodCode and return a period object\n\nconst parsePeriodCode = code => ({\n  code: code,\n  name: code\n});\n\nconst SelectionProvider = ({\n  children\n}) => {\n  const [query, setQuery] = useQueryParams({\n    wf: StringParam,\n    pe: StringParam,\n    ou: StringParam\n  });\n  const {\n    dataApprovalWorkflows\n  } = useCurrentUser();\n  const [openedSelect, setOpenedSelect] = useState('');\n  const [workflow, setWorkflow] = useState(() => dataApprovalWorkflows.find(({\n    id\n  }) => id === query.wf) || {});\n  const [period, setPeriod] = useState(() => query.pe ? parsePeriodCode(query.pe) : {});\n  const [orgUnit, setOrgUnit] = useState( // TODO: implement proper org unit state once we know what we need\n  query.ou ? {\n    id: query.ou\n  } : {});\n  useEffect(() => {\n    setQuery({\n      wf: workflow.id,\n      pe: period.code,\n      ou: orgUnit.id\n    });\n  }, [workflow, period, orgUnit]);\n  const providerValue = {\n    workflow,\n    period,\n    orgUnit,\n    openedSelect,\n    setOpenedSelect,\n    clearAll: () => {\n      setOpenedSelect(''); // clear all by resetting to default value `{}`\n\n      setWorkflow({});\n      setPeriod({});\n      setOrgUnit({});\n    },\n    selectWorkflow: workflow => {\n      setOpenedSelect(''); // first field, clear both subsequent fields\n\n      setWorkflow(workflow);\n      setPeriod({});\n      setOrgUnit({});\n    },\n    selectPeriod: period => {\n      setOpenedSelect(''); // second field, clear subsequent field\n\n      setPeriod(period);\n      setOrgUnit({});\n    },\n    selectOrgUnit: orgUnit => {\n      setOpenedSelect(''); // last field, no need to clear other fields\n\n      setOrgUnit(orgUnit);\n    }\n  };\n  return /*#__PURE__*/React.createElement(SelectionContext.Provider, {\n    value: providerValue\n  }, children);\n};\n\nSelectionProvider.propTypes = {\n  children: PropTypes.node\n};\nexport { SelectionProvider };","import { useContext } from 'react';\nimport { SelectionContext } from './selection-context.js';\nexport const useSelection = () => useContext(SelectionContext);","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React from 'react';\nimport { useSelection } from '../selection/index.js';\nimport classes from './clear-all-button.module.css';\n\nconst ClearAllButton = () => {\n  const {\n    clearAll\n  } = useSelection();\n  return /*#__PURE__*/React.createElement(Button, {\n    className: classes.button,\n    secondary: true,\n    onClick: clearAll\n  }, i18n.t('Clear selections'));\n};\n\nexport { ClearAllButton };","import { IconChevronDown24, IconChevronUp24, colors, Popover } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef } from 'react';\nimport classes from './context-select.module.css';\n\nconst ContextSelect = ({\n  children,\n  label,\n  value,\n  onClose,\n  onOpen,\n  disabled,\n  open\n}) => {\n  const ref = useRef();\n  const Icon = open ? IconChevronUp24 : IconChevronDown24;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    ref: ref,\n    className: classes.button,\n    onClick: onOpen,\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.prefix\n  }, label), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.value\n  }, value), /*#__PURE__*/React.createElement(Icon, {\n    color: disabled ? colors.grey600 : undefined\n  })), open && /*#__PURE__*/React.createElement(Popover, {\n    reference: ref,\n    arrow: false,\n    placement: \"bottom-start\",\n    onClickOutside: onClose\n  }, children));\n};\n\nContextSelect.propTypes = {\n  children: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpen: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  open: PropTypes.bool\n};\nexport { ContextSelect };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelection } from '../selection/index.js';\nconst ORG_UNIT = 'ORG_UNIT';\n\nconst OrgUnitSelect = () => {\n  const {\n    orgUnit\n    /*, setOrgUnit */\n    ,\n    workflow,\n    period,\n    openedSelect,\n    setOpenedSelect\n  } = useSelection();\n  const open = openedSelect === ORG_UNIT;\n  const value = orgUnit.name || i18n.t('Choose an organisation unit');\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    label: i18n.t('Organisation Unit'),\n    value: value,\n    open: open,\n    disabled: !(workflow.id && period.code),\n    onOpen: () => setOpenedSelect(ORG_UNIT),\n    onClose: () => setOpenedSelect('')\n  }, /*#__PURE__*/React.createElement(\"pre\", null, \"Org Unit picker placeholder\"));\n};\n\nexport { OrgUnitSelect };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelection } from '../selection/index.js';\nconst PERIOD = 'PERIOD';\n\nconst PeriodSelect = () => {\n  const {\n    period,\n    workflow,\n    selectPeriod,\n    openedSelect,\n    setOpenedSelect\n  } = useSelection();\n  const open = openedSelect === PERIOD;\n  const value = period.name || i18n.t('Choose a period');\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    label: i18n.t('Period'),\n    value: value,\n    open: open,\n    disabled: !workflow.id,\n    onOpen: () => setOpenedSelect(PERIOD),\n    onClose: () => setOpenedSelect('')\n  }, /*#__PURE__*/React.createElement(\"pre\", null, \"Period picker placeholder \", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => selectPeriod({\n      code: '20210404',\n      name: '04-04-2020'\n    })\n  }, \"Set period to sth\")));\n};\n\nexport { PeriodSelect };","import { MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './workflow-select-option.module.css';\n\nconst WorkflowSelectOption = ({\n  name,\n  periodType,\n  active,\n  onClick\n}) => {\n  const label = /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.option\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.title\n  }, name), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.subtitle\n  }, periodType || 'UNAVAILABLE'));\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: classes.bordered,\n    active: active,\n    onClick: onClick,\n    label: label\n  });\n};\n\nWorkflowSelectOption.propTypes = {\n  name: PropTypes.string.isRequired,\n  active: PropTypes.bool,\n  periodType: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport { WorkflowSelectOption };","import i18n from '@dhis2/d2-i18n';\nimport { Menu } from '@dhis2/ui';\nimport React from 'react';\nimport { useCurrentUser } from '../../current-user/index.js';\nimport { ContextSelect } from '../context-select/index.js';\nimport { useSelection } from '../selection/index.js';\nimport { WorkflowSelectOption } from './workflow-select-option.js';\nimport classes from './workflow-select.module.css';\nconst WORKFLOW = 'WORKFLOW';\n\nconst WorkflowSelect = () => {\n  const {\n    dataApprovalWorkflows\n  } = useCurrentUser();\n  const {\n    workflow: selectedWorkflow,\n    selectWorkflow,\n    openedSelect,\n    setOpenedSelect\n  } = useSelection();\n  const open = openedSelect === WORKFLOW;\n  const value = selectedWorkflow.name || i18n.t('Choose a workflow');\n  return /*#__PURE__*/React.createElement(ContextSelect, {\n    label: i18n.t('Workflow'),\n    value: value,\n    open: open,\n    onOpen: () => setOpenedSelect(WORKFLOW),\n    onClose: () => setOpenedSelect('')\n  }, dataApprovalWorkflows.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.message\n  }, i18n.t('No workflows found. None may exist or you may not have access to any.')) : /*#__PURE__*/React.createElement(Menu, null, dataApprovalWorkflows.map(workflow => /*#__PURE__*/React.createElement(WorkflowSelectOption, {\n    key: workflow.id,\n    name: workflow.name,\n    periodType: workflow.periodType,\n    active: workflow.id === selectedWorkflow.id,\n    onClick: () => selectWorkflow(workflow)\n  }))));\n};\n\nexport { WorkflowSelect };","import React from 'react';\nimport { ClearAllButton } from './clear-all-button/index.js';\nimport { OrgUnitSelect } from './org-unit-select/org-unit-select.js';\nimport { PeriodSelect } from './period-select/period-select.js';\nimport { SelectionProvider } from './selection/index.js';\nimport { WorkflowSelect } from './workflow-select/index.js';\n\nconst TopBar = () => /*#__PURE__*/React.createElement(SelectionProvider, null, /*#__PURE__*/React.createElement(WorkflowSelect, null), /*#__PURE__*/React.createElement(PeriodSelect, null), /*#__PURE__*/React.createElement(OrgUnitSelect, null), /*#__PURE__*/React.createElement(ClearAllButton, null));\n\nexport { TopBar };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './layout.module.css';\n\nconst LayoutSection = ({\n  children,\n  className\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: className\n}, children);\n\nLayoutSection.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n\nconst Container = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.container\n}));\n\nconst Top = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.top\n}));\n\nconst Content = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.content\n}));\n\nconst Bottom = props => /*#__PURE__*/React.createElement(LayoutSection, _extends({}, props, {\n  className: classes.bottom\n}));\n\nexport const Layout = {\n  Container,\n  Top,\n  Content,\n  Bottom\n};","import { App } from './app.js';\nexport default App;","import { CssVariables } from '@dhis2/ui';\nimport React from 'react';\nimport { QueryParamProvider } from 'use-query-params';\nimport { AuthWall } from '../auth/index.js';\nimport { BottomBar } from '../bottom-bar/index.js';\nimport { CurrentUserProvider } from '../current-user/index.js';\nimport { DataWorkspace } from '../data-workspace/index.js';\nimport { TopBar } from '../top-bar/index.js';\nimport { Layout } from './layout.js';\n\nconst App = () => /*#__PURE__*/React.createElement(QueryParamProvider, null, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  colors: true,\n  theme: true\n}), /*#__PURE__*/React.createElement(CurrentUserProvider, null, /*#__PURE__*/React.createElement(AuthWall, null, /*#__PURE__*/React.createElement(Layout.Container, null, /*#__PURE__*/React.createElement(Layout.Top, null, /*#__PURE__*/React.createElement(TopBar, null)), /*#__PURE__*/React.createElement(Layout.Content, null, /*#__PURE__*/React.createElement(DataWorkspace, null)), /*#__PURE__*/React.createElement(Layout.Bottom, null, /*#__PURE__*/React.createElement(BottomBar, null))))));\n\nexport { App };"],"sourceRoot":""}