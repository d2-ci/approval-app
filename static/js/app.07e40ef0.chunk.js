(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{504:function(e,t,a){e.exports={wrapper:"error-message_wrapper__17C15"}},505:function(e,t,a){e.exports={container:"status-icon_container__1W8RM"}},511:function(e,t,a){e.exports={summary:"approve-modal_summary__1abcn",summaryTitle:"approve-modal_summaryTitle__2sA2i",summaryList:"approve-modal_summaryList__1lufS",confirmationStatement:"approve-modal_confirmationStatement__1LDKw"}},512:function(e,t,a){e.exports={bottomBarItem:"bottom-bar-item_bottomBarItem__2GbAg"}},513:function(e,t,a){e.exports={bottomBar:"bottom-bar_bottomBar__2CojG"}},514:function(e,t,a){e.exports={display:"display_display__pmr3Z",chooseDataSet:"display_chooseDataSet__2HsJD display_display__pmr3Z",loadingWrapper:"display_loadingWrapper__iFDcl",noData:"display_noData__2YWIA display_display__pmr3Z",retryButton:"display_retryButton__3sQOQ"}},515:function(e,t,a){e.exports={titleBar:"title-bar_titleBar__3Zvkn",workflowName:"title-bar_workflowName__1S55b",workflowDataSetsCount:"title-bar_workflowDataSetsCount__t1ej1"}},516:function(e,t,a){e.exports={button:"clear-all-button_button__mDEHm"}},517:function(e,t,a){e.exports={button:"context-select_button__1y8va",prefix:"context-select_prefix__3xDFu",value:"context-select_value__oltZj",tooltipwrap:"context-select_tooltipwrap__3Fqbe"}},518:function(e,t,a){e.exports={container:"approval-status-icons-legend_container__eFk9p",label:"approval-status-icons-legend_label__1zQia"}},519:function(e,t,a){e.exports={container:"approval-status-label_container__1xOLq",iconContainer:"approval-status-label_iconContainer__3bZcv"}},520:function(e,t,a){e.exports={popoverContainer:"org-unit-select_popoverContainer__3jDDB",scrollbox:"org-unit-select_scrollbox__23k48"}},521:function(e,t,a){e.exports={menu:"period-menu_menu__2CHPS"}},522:function(e,t,a){e.exports={container:"year-navigator_container__3XXd2",year:"year-navigator_year__14nbM"}},523:function(e,t,a){e.exports={bordered:"workflow-select-option_bordered__JBAIX",option:"workflow-select-option_option__1cqTS",title:"workflow-select-option_title__3zrtv",subtitle:"workflow-select-option_subtitle__3yrup"}},524:function(e,t,a){e.exports={message:"workflow-select_message__1jq5N"}},525:function(e,t,a){e.exports={container:"layout_container__Cp-96",top:"layout_top__2gcI9",content:"layout_content__10QOH",bottom:"layout_bottom__2toTd"}},526:function(e){e.exports=JSON.parse('{"Not authorized":"Not authorized","You don\'t have access to the Data Approval App. Contact a system administrator to request access.":"You don\'t have access to the Data Approval App. Contact a system administrator to request access.","Acceptance failed: {{error}}":"Acceptance failed: {{error}}","Accept":"Accept","Approval saved":"Approval saved","Approve":"Approve","Approving {{count}} data sets":"Approving {{count}} data sets","Approving {{count}} data sets_plural":"Approving {{count}} data sets","Approving {{count}} data set":"Approving {{count}} data set","Approving {{count}} data set_plural":"Approving {{count}} data set","Are you sure you want to approve this data?":"Are you sure you want to approve this data?","There was a problem saving this approval":"There was a problem saving this approval","This data couldn\u2019t be approved. Try again, or contact your system administrator.":"This data couldn\u2019t be approved. Try again, or contact your system administrator.","Cancel":"Cancel","Unacceptance failed: {{error}}":"Unacceptance failed: {{error}}","Unaccept":"Unaccept","Unapproval failed: {{error}}":"Unapproval failed: {{error}}","Unapprove":"Unapprove","Choose a data set to review":"Choose a data set to review","{{- workflowName}} has multiple data sets. Choose a data set from the tabs above.":"{{- workflowName}} has multiple data sets. Choose a data set from the tabs above.","Loading data set":"Loading data set","There was a problem displaying this data set":"There was a problem displaying this data set","This data set couldn\'t be loaded or displayed. Try again, or contact your system administrator.":"This data set couldn\'t be loaded or displayed. Try again, or contact your system administrator.","Retry loading data set":"Retry loading data set","This data set doesn\'t have any data for {{- period}} in {{- orgUnit}}.":"This data set doesn\'t have any data for {{- period}} in {{- orgUnit}}.","1 data set":"1 data set","{{dataSetsCount}} data sets":"{{dataSetsCount}} data sets","Ready for approval":"Ready for approval","Ready for approval \u2014 Accepted":"Ready for approval \u2014 Accepted","Waiting for lower level approval":"Waiting for lower level approval","Waiting for higher level approval":"Waiting for higher level approval","Approved":"Approved","Cannot be approved":"Cannot be approved","Could not retrieve approval status":"Could not retrieve approval status","January":"January","February":"February","March":"March","April":"April","May":"May","June":"June","July":"July","August":"August","September":"September","October":"October","November":"November","December":"December","Week {{weekNumber}}":"Week {{weekNumber}}","Bi-Week {{biWeekNumber}}":"Bi-Week {{biWeekNumber}}","Daily":"Daily","Weekly":"Weekly","Weekly (Start Wednesday)":"Weekly (Start Wednesday)","Weekly (Start Thursday)":"Weekly (Start Thursday)","Weekly (Start Saturday)":"Weekly (Start Saturday)","Weekly (Start Sunday)":"Weekly (Start Sunday)","Bi-weekly":"Bi-weekly","Monthly":"Monthly","Bi-monthly":"Bi-monthly","Quarterly":"Quarterly","Six-monthly":"Six-monthly","Six-monthly April":"Six-monthly April","Yearly":"Yearly","Financial year (Start November)":"Financial year (Start November)","Financial year (Start October)":"Financial year (Start October)","Financial year (Start July)":"Financial year (Start July)","Financial year (Start April)":"Financial year (Start April)","Clear selections":"Clear selections","Waiting for approval":"Waiting for approval","Failed to load approval state":"Failed to load approval state","Choose a period first":"Choose a period first","Choose a workflow and period first":"Choose a workflow and period first","Organisation Unit":"Organisation Unit","Choose an organisation unit":"Choose an organisation unit","Period":"Period","Choose a period":"Choose a period","Choose a workflow first":"Choose a workflow first","Workflow":"Workflow","Choose a workflow":"Choose a workflow","No workflows found. None may exist, or you may not have access to any.":"No workflows found. None may exist, or you may not have access to any.","Could not load approval data":"Could not load approval data"}')},529:function(e,t,a){"use strict";a.r(t);var r=a(9),o=a(0),l=a.n(o);const n=Object(o.createContext)({authorities:[],organisationUnits:[],dataApprovalWorkflows:[]});var s=a(10),i=a(504),c=a.n(i);const d=({children:e,title:t})=>l.a.createElement("div",{className:c.a.wrapper},l.a.createElement(r.F,{error:!0,title:t},e));var p=a(6);const u="Daily",m="Weekly",y="WeeklyWednesday",v="WeeklyThursday",f="WeeklySaturday",w="WeeklySunday",g="BiWeekly",h="Monthly",E="BiMonthly",b="Quarterly",N="SixMonthly",D="SixMonthlyApril",k="Yearly",S="FinancialApril",_="FinancialJuly",A="FinancialOct",O="FinancialNov",C=new Set([u,m,y,v,f,w,g,h,E,b,N,D,k,S,_,A,O]),$=e=>C.has(e),P=e=>[p.a.t("January"),p.a.t("February"),p.a.t("March"),p.a.t("April"),p.a.t("May"),p.a.t("June"),p.a.t("July"),p.a.t("August"),p.a.t("September"),p.a.t("October"),p.a.t("November"),p.a.t("December")][e],F=()=>new Date(Date.now()),x=e=>{const t=parseInt(e,10)||0;return F().getFullYear()+t},W=(e,t,a)=>r=>{let o=[];const l=r.filterFuturePeriods,n=r.reversePeriods,s=x(r.offset),i=((e,t=1)=>{const a=new Date(e,0,4),r=a.getDay(),o=a,l=r-t;return l>0?o.setDate(a.getDate()-l):l<0&&(o.setDate(a.getDate()-l),o.setDate(o.getDate()-7)),o})(s,t.startDay);let c=1;for(;i.getFullYear()<=s;){const a={};a.startDate=e(i),a.iso=`${s}${t.shortName}W${c}`,a.id=a.iso,i.setDate(i.getDate()+6),a.endDate=e(i);const r=c;if(a.displayName=`${p.a.t("Week {{weekNumber}}",{weekNumber:r})} - ${a.startDate} - ${a.endDate}`,i.getFullYear()>s&&i.getDate()>=4)break;o.push(a),i.setDate(i.getDate()+1),c+=1}return o=l?a(o):o,o=n?o.reverse():o,o},U=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`01 Jan ${n}`),i=s.getDay();let c=1;for(i<=4?s.setDate(s.getDate()-(i-1)):s.setDate(s.getDate()+(8-i));s.getFullYear()<=n;){const t={};t.iso=`${n}BiW${c}`,t.id=t.iso,t.startDate=e(s),s.setDate(s.getDate()+13),t.endDate=e(s);const a=c;if(t.displayName=`${p.a.t("Bi-Week {{biWeekNumber}}",{biWeekNumber:a})} - ${t.startDate} - ${t.endDate}`,s.getFullYear()>n&&s.getDate()>=4)break;r.push(t),s.setDate(s.getDate()+1),c+=1}return r=o?t(r):r,r=l?r.reverse():r,r},I=(e,t)=>{const a=e=>{const t=e.getFullYear();let a=String(e.getMonth()+1);return a=a.length<2?`0${a}`:a,t+a};return r=>{let o=[];const l=r.filterFuturePeriods,n=r.reversePeriods,s=x(r.offset),i=new Date(`31 Dec ${s}`);for(;i.getFullYear()===s;){const t={};t.endDate=e(i),i.setDate(1),t.startDate=e(i);const r=P(i.getMonth());t.displayName=`${r} ${s}`,t.iso=a(i),t.id=t.iso,o.push(t),i.setDate(0)}return o=l?t(o):o,o=n?o:o.reverse(),o}},T=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`31 Dec ${n}`);let i=6;for(;s.getFullYear()===n;){const t={};t.endDate=e(s),s.setDate(0),s.setDate(1),t.startDate=e(s);const a=P(s.getMonth()),o=P(s.getMonth()+1),l=s.getFullYear();t.displayName=`${a} - ${o} ${l}`,t.iso=`${n}0${i}B`,t.id=t.iso,r.push(t),s.setDate(0),i--}return r=o?t(r):r,r=l?r:r.reverse(),r},R=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`31 Dec ${n}`);let i=4;for(;s.getFullYear()===n;){const t={};t.endDate=e(s),s.setDate(0),s.setDate(0),s.setDate(1),t.startDate=e(s);const a=P(s.getMonth()),o=P(s.getMonth()+2),l=s.getFullYear();t.displayName=`${a} - ${o} ${l}`,t.iso=`${n}Q${i}`,t.id=t.iso,r.push(t),s.setDate(0),i-=1}return r=o?t(r):r,r=l?r:r.reverse(),r},Y=e=>t=>{let a=[];const r=t.filterFuturePeriods,o=t.reversePeriods,l=x(t.offset);let n={};return n.startDate=`${l}-01-01`,n.endDate=`${l}-06-30`,n.displayName=`${P(0)} - ${P(5)} ${l}`,n.iso=`${l}S1`,n.id=n.iso,a.push(n),n={},n.startDate=`${l}-07-01`,n.endDate=`${l}-12-31`,n.displayName=`${P(6)} - ${P(11)} ${l}`,n.iso=`${l}S2`,n.id=n.iso,a.push(n),a=r?e(a):a,a=o?a.reverse():a,a},j=e=>t=>{let a=[];const r=t.filterFuturePeriods,o=t.reversePeriods,l=x(t.offset);let n={};return n.startDate=`${l}-04-01`,n.endDate=`${l}-09-30`,n.displayName=`${P(3)} - ${P(8)} ${l}`,n.iso=`${l}AprilS1`,n.id=n.iso,a.push(n),n={},n.startDate=`${l}-10-01`,n.endDate=`${l+1}-03-31`,n.displayName=`${P(9)} ${l} - ${P(2)} ${l+1}`,n.iso=`${l}AprilS2`,n.id=n.iso,a.push(n),a=r?e(a):a,a=o?a.reverse():a,a},B=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`31 Dec ${n}`);for(;n-s.getFullYear()<10;){const t={};t.endDate=e(s),s.setMonth(0,1),t.startDate=e(s);const a=s.getFullYear().toString();t.displayName=a,t.iso=s.getFullYear().toString(),t.id=t.iso.toString(),r.push(t),s.setDate(0)}return r=o?t(r):r,r=l?r:r.reverse(),r},M=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`30 Sep ${n+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(s),s.setYear(s.getFullYear()-1),s.setDate(s.getDate()+1),t.startDate=e(s);const a=s.getFullYear(),o=s.getFullYear()+1;t.displayName=`${P(9)} ${a} - ${P(8)} ${o}`,t.id=`${s.getFullYear()}Oct`,r.push(t),s.setDate(s.getDate()-1)}return r=o?t(r):r,r=l?r:r.reverse(),r},L=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`31 Oct ${n+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(s),s.setYear(s.getFullYear()-1),s.setDate(s.getDate()+1),t.startDate=e(s);const a=s.getFullYear(),o=s.getFullYear()+1;t.displayName=`${P(10)} ${a} - ${P(9)} ${o}`,t.id=`${s.getFullYear()}Nov`,r.push(t),s.setDate(s.getDate()-1)}return r=o?t(r):r,r=l?r:r.reverse(),r},z=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`30 Jun ${n+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(s),s.setYear(s.getFullYear()-1),s.setDate(s.getDate()+1),t.startDate=e(s);const a=s.getFullYear(),o=s.getFullYear()+1;t.displayName=`${P(6)} ${a} - ${P(5)} ${o}`,t.id=`${s.getFullYear()}July`,r.push(t),s.setDate(s.getDate()-1)}return r=o?t(r):r,r=l?r:r.reverse(),r},V=(e,t)=>a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`31 Mar ${n+1}`);for(let t=0;t<10;t++){const t={};t.endDate=e(s),s.setYear(s.getFullYear()-1),s.setDate(s.getDate()+1),t.startDate=e(s);const a=s.getFullYear(),o=s.getFullYear()+1;t.displayName=`${P(3)} ${a} - ${P(2)} ${o}`,t.id=`${s.getFullYear()}April`,r.push(t),s.setDate(s.getDate()-1)}return r=o?t(r):r,r=l?r:r.reverse(),r},J=e=>{const t=e.getFullYear();let a=String(e.getMonth()+1),r=String(e.getDate());return a=a.length<2?`0${a}`:a,r=r.length<2?`0${r}`:r,`${t}-${a}-${r}`},q=e=>{const t=[],a=F();for(let r=0;r<e.length;r++)new Date(e[r].startDate)<=a&&t.push(e[r]);return t},H=()=>{return[{type:u,regex:/^([0-9]{4})([0-9]{2})([0-9]{2})$/,getPeriods:(e=J,t=q,a=>{let r=[];const o=a.filterFuturePeriods,l=a.reversePeriods,n=x(a.offset),s=new Date(`01 Jan ${n}`);for(;s.getFullYear()===n;){const t={};t.startDate=e(s),t.endDate=t.startDate,t.displayName=t.startDate,t.iso=t.startDate.replace(/-/g,""),t.id=t.iso,r.push(t),s.setDate(s.getDate()+1)}return r=o?t(r):r,r=l?r.reverse():r,r}),displayName:p.a.t("Daily")},{type:m,regex:/^([0-9]{4})()W([0-9]{1,2})$/,getPeriods:W(J,{shortName:"",startDay:1},q),displayName:p.a.t("Weekly")},{type:y,regex:/^([0-9]{4})(Wed)W([0-9]{1,2})$/,getPeriods:W(J,{shortName:"Wed",startDay:3},q),displayName:p.a.t("Weekly (Start Wednesday)")},{type:v,regex:/^([0-9]{4})(Thu)W([0-9]{1,2})$/,getPeriods:W(J,{shortName:"Thu",startDay:4},q),displayName:p.a.t("Weekly (Start Thursday)")},{type:f,regex:/^([0-9]{4})(Sat)W([0-9]{1,2})$/,getPeriods:W(J,{shortName:"Sat",startDay:6},q),displayName:p.a.t("Weekly (Start Saturday)")},{type:w,regex:/^([0-9]{4})(Sun)W([0-9]{1,2})$/,getPeriods:W(J,{shortName:"Sun",startDay:7},q),displayName:p.a.t("Weekly (Start Sunday)")},{type:g,regex:/^([0-9]{4})BiW([0-9]{1,2})$/,getPeriods:U(J,q),displayName:p.a.t("Bi-weekly")},{type:h,regex:/^([0-9]{4})([0-9]{2})$/,getPeriods:I(J,q),displayName:p.a.t("Monthly")},{type:E,regex:/^([0-9]{4})([0-9]{2})B$/,getPeriods:T(J,q),displayName:p.a.t("Bi-monthly")},{type:b,regex:/^([0-9]{4})Q([1234])$/,getPeriods:R(J,q),displayName:p.a.t("Quarterly")},{type:N,regex:/^([0-9]{4})S([12])$/,getPeriods:Y(q),displayName:p.a.t("Six-monthly")},{type:D,regex:/^([0-9]{4})AprilS([12])$/,getPeriods:j(q),displayName:p.a.t("Six-monthly April")},{type:k,regex:/^([0-9]{4})$/,getPeriods:B(J,q),displayName:p.a.t("Yearly")},{type:O,regex:/^([0-9]{4})Nov$/,getPeriods:L(J,q),displayName:p.a.t("Financial year (Start November)")},{type:A,regex:/^([0-9]{4})Oct$/,getPeriods:M(J,q),displayName:p.a.t("Financial year (Start October)")},{type:_,regex:/^([0-9]{4})July$/,getPeriods:z(J,q),displayName:p.a.t("Financial year (Start July)")},{type:S,regex:/^([0-9]{4})April$/,getPeriods:V(J,q),displayName:p.a.t("Financial year (Start April)")}];var e,t},Q=e=>{const t=parseInt(e,10);if(!Number.isInteger(t))throw new Error(`Invalid year "${e}" passed to "getYearOffsetFromNow"`);return t-F().getFullYear()},G=(e,t)=>{const a=(e=>{if(!$(e))throw new Error(`Invalid period type "${e}" supplied to "getFixedPeriodType"`);const t=H().find((({type:t})=>t===e));if(!t)throw new Error(`Could not find periodType object for "${e}"`);return t})(e),r=Q(t);return a&&Number.isInteger(r)?a.getPeriods({offset:r}):[]},K=e=>!isNaN(e.getTime()),Z=(e,t,a)=>{if(t=new Date(t),a=new Date(a),!K(t))throw new Error("Invalid startDate provided to getFixedPeriodsForTypeAndDateRange");if(!K(a))throw new Error("Invalid endDate provided to getFixedPeriodsForTypeAndDateRange");let r=a.getFullYear(),o=!1;const l=[];for(;!o;)G(e,r).reverse().forEach((e=>{const r=new Date(e.endDate),n=r>=t;n||(o=!0),n&&r<=a&&l.push(e)})),--r;return l.reverse()},X=()=>l.a.createElement(r.e,null,l.a.createElement(r.f,null)),ee=({color:e})=>l.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",color:e},l.a.createElement("path",{d:"m7 10.707-2.5-2.5005.7065-.7065 1.7935 1.793 3.7925-3.793.7075.7075zm1-9.707c-3.86599325 0-7 3.13400675-7 7 0 3.8659932 3.13400675 7 7 7 3.8659932 0 7-3.1340068 7-7 0-1.85651543-.7374979-3.63699282-2.0502525-4.94974747-1.3127547-1.31275465-3.09323207-2.05025253-4.9497475-2.05025253zm0 13c-3.3137085 0-6-2.6862915-6-6s2.6862915-6 6-6 6 2.6862915 6 6c0 1.59129894-.632141 3.1174224-1.7573593 4.2426407s-2.65134176 1.7573593-4.2426407 1.7573593z",fill:"currentColor",fillRule:"evenodd"})),te=({color:e})=>l.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",color:e},l.a.createElement("path",{d:"m8 1c3.8659932 0 7 3.13400675 7 7 0 3.8659932-3.1340068 7-7 7-3.86599325 0-7-3.1340068-7-7 0-3.86599325 3.13400675-7 7-7zm0 1c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6-2.6862915-6-6-6zm0 3c1.65685425 0 3 1.34314575 3 3s-1.34314575 3-3 3-3-1.34314575-3-3 1.34314575-3 3-3z",fill:"currentColor"})),ae=({color:e})=>l.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",color:e},l.a.createElement("path",{d:"m10.9909978 13.1912785.4995502.8652231c-.6149252.36386-1.28431.6250019-1.98177134.7738229l-.30055406.0568756-.17347694-.9839041c.69055396-.1141334 1.35389354-.3555692 1.95625214-.7120175zm-5.99434717 0c.51630734.3055271 1.07741706.5265553 1.66206503.655345l.29418707.0566725-.17347695.9839041c-.70494478-.1165334-1.38558203-.3467594-2.01552871-.6810754l-.26679673-.1496231zm8.63003137-3.1410745.9388324.3416946c-.2371754.6739992-.5820951 1.3043178-1.0207212 1.8666408l-.1936788.2367617-.7653324-.6422054c.4556314-.5313108.8085871-1.1426479 1.0409-1.8028917zm-11.26571557 0c.19912533.5659233.48688614 1.095915.85196802 1.5703782l.18893198.2325135-.7653324.6422054c-.46511284-.5423995-.8385248-1.1562681-1.10619776-1.8172909l-.10820224-.2861116zm2.98641115-5.40375758 6.00000002 5.99999998-.7071068.7071068-6-5.99999999zm9.21813622.96165313c.2515515.66876676.3924886 1.37332892.4179358 2.08603675l.0038209.30586432-.9990803-.0000117c.0064405-.59989882-.0826983-1.19634818-.2634871-1.76706305l-.0980137-.28310973zm-13.14337922 0 .93882439.34171659c-.21122962.56151769-.3314642 1.15248403-.35677429 1.750614l-.00472648.29955878-.99908031.0000117c-.0087422-.81653816.13426921-1.6275962.42175669-2.39190107zm10.06841202-3.6646023c.6225747.35061085 1.1834226.79974418 1.661036 1.32935292l.1995328.23184963-.7653475.64218748c-.3806737-.46368907-.8323483-.86329844-1.337689-1.18428261l-.2570623-.15387264zm-6.99344486 0 .49953002.86523478c-.52274789.29437172-.99471877.66979291-1.39857796 1.11171803l-.19617336.22643722-.76534744-.64218748c.51816369-.6311239 1.14905485-1.16050444 1.86056874-1.56120255zm4.36598381-.88594632.34513864.05524888-.1735.9839c-.58966661-.11051404-1.19253336-.12630176-1.78597144-.04736316l-.29582856.04736316-.1735-.9839c.68795575-.12891407 1.39130692-.14733037 2.08366136-.05524888z",fill:"currentColor",fillRule:"evenodd"})),re=e=>{const t=(e=>{switch(e){case"UNAPPROVED_READY":return p.a.t("Ready for approval");case"ACCEPTED_HERE":return p.a.t("Ready for approval \u2014 Accepted");case"UNAPPROVED_WAITING":return p.a.t("Waiting for lower level approval");case"UNAPPROVED_ABOVE":return p.a.t("Waiting for higher level approval");case"APPROVED_HERE":case"APPROVED_ABOVE":return p.a.t("Approved");case"UNAPPROVABLE":return p.a.t("Cannot be approved");case"ERROR":return p.a.t("Could not retrieve approval status");default:throw new Error(`Unknown approval state: '${e}'`)}})(e),{icon:a,type:o}=(e=>{switch(e){case"UNAPPROVED_READY":case"ACCEPTED_HERE":return{icon:te,type:"neutral"};case"UNAPPROVED_WAITING":case"UNAPPROVED_ABOVE":return{icon:ae,type:"default"};case"APPROVED_HERE":case"APPROVED_ABOVE":return{icon:ee,type:"positive"};case"UNAPPROVABLE":return{icon:r.r,type:"negative"};case"ERROR":return{icon:r.v,type:"negative"};default:throw new Error(`Unknown approval state: '${e}'`)}})(e);return{displayName:t,icon:a,type:o}},oe=({approvalState:e})=>{const{icon:t,displayName:a,type:o}=re(e),n={[o]:!0,icon:l.a.createElement(t,null)};return l.a.createElement(r.M,n,a)};var le=a(505),ne=a.n(le);const se=e=>{switch(e){case"neutral":return r.O.blue800;case"positive":return r.O.green800;case"negative":return r.O.red800}},ie=({approvalState:e,showTitle:t})=>{const{icon:a,displayName:r,type:o}=re(e);return l.a.createElement("span",{title:t?r:"",className:ne.a.container},l.a.createElement(a,{color:se(o)}))};ie.defaultProps={showTitle:!0};const ce={me:{resource:"me",params:{fields:["authorities","organisationUnits"]}},dataApprovalWorkflows:{resource:"dataApprovalWorkflows",params:{paging:!1,fields:["id","displayName","dataApprovalLevels","periodType","dataSets[id,displayName,periodType]"]}}},de=({children:e})=>{const{data:t,loading:a,error:o}=Object(s.g)(ce);if(a)return l.a.createElement(r.y,null,l.a.createElement(X,null));if(o)throw o;const{authorities:i,organisationUnits:c}=t.me,{dataApprovalWorkflows:d}=t.dataApprovalWorkflows,p={authorities:i,organisationUnits:c,dataApprovalWorkflows:d};return l.a.createElement(n.Provider,{value:p},e)},pe=()=>Object(o.useContext)(n),ue=({children:e})=>(()=>{const{authorities:e}=pe();return e.some((e=>"ALL"===e||"M_dhis-web-approval"===e))})()?e:l.a.createElement(d,{title:p.a.t("Not authorized")},p.a.t("You don't have access to the Data Approval App. Contact a system administrator to request access.")),me=Object(o.createContext)({approvalState:"",allowedActions:{},refresh:()=>{throw new Error("WorkflowContext.refresh has not been initialized")}}),ye=()=>{throw new Error("Selection Context has not been initialized")},ve=Object(o.createContext)({workflow:{},period:{},orgUnit:{},selectWorkflow:ye,selectPeriod:ye,selectOrgUnit:ye,clearAll:ye,setOpenedSelect:ye});var fe=a(503);const we=e=>`/#/?${Object(fe.stringify)(e)}`;var ge=a(510);const he=Object(ge.a)(),Ee=e=>{const{wf:t,pe:a,ou:r,ouDisplayName:o}=(()=>{const e=Object(fe.parse)(he.location.search);return{wf:e.wf,pe:e.pe,ou:e.ou,ouDisplayName:e.ouDisplayName}})(),l=be(e,t);return{workflow:l,period:Ne(a,l),orgUnit:De(r,o)}},be=(e,t)=>1===e.length?e[0]:t&&e.find((e=>e.id===t))||null,Ne=(e,t={})=>e&&t.id?((e,t)=>{const a=t?H().filter((({type:e})=>t.some((t=>t===e)))):H();let r,o,l=0;for(;l<a.length&&!o;)r=a[l],o=e.match(r.regex),l++;if(!o)return null;const n=parseInt(o[1],10),s=Q(n);return{...r.getPeriods({offset:s}).find((t=>t.id===e)),year:n,periodType:r}})(e,[t.periodType]):null,De=(e,t)=>{if(!e||!t)return null;const[a]=e.match(/[/]?[^/]*$/);return{id:a.replace("/",""),path:e,displayName:t}},ke="SET_OPENED_SELECT",Se="CLEAR_ALL",_e="SELECT_WORKFLOW",Ae="SELECT_PERIOD",Oe="SELECT_ORG_UNIT",Ce="SET_STATE_FROM_QUERY_PARAMS",$e=(e,{type:t,payload:a})=>{var r,o,l;switch(t){case ke:return{...e,openedSelect:a.openedSelect};case Se:return{openedSelect:"",workflow:a.workflow,period:null,orgUnit:null};case _e:return{...e,openedSelect:"",workflow:a.workflow,period:e.workflow&&(null===(r=e.workflow)||void 0===r?void 0:r.periodType)===(null===(o=a.workflow)||void 0===o?void 0:o.periodType)?e.period:null};case Ae:return{...e,openedSelect:null!==(l=a.period)&&void 0!==l&&l.id?"":e.openedSelect,period:a.period};case Oe:return{...e,openedSelect:"",orgUnit:a.orgUnit};case Ce:return{openedSelect:"",...Ee(a.dataApprovalWorkflows)};default:return e}},Pe=({children:e})=>{const{dataApprovalWorkflows:t}=pe(),[{openedSelect:a,workflow:r,period:n,orgUnit:s},i]=Object(o.useReducer)($e,{openedSelect:"",...Ee(t)}),c={workflow:r,period:n,orgUnit:s,openedSelect:a,clearAll:()=>i({type:Se,payload:{workflow:be(t)}}),setOpenedSelect:e=>i({type:ke,payload:{openedSelect:e}}),selectWorkflow:e=>i({type:_e,payload:{workflow:e}}),selectPeriod:e=>i({type:Ae,payload:{period:e}}),selectOrgUnit:e=>i({type:Oe,payload:{orgUnit:e}})};return Object(o.useEffect)((()=>{(e=>{var t,a,r,o;const l=Object(fe.stringify)({wf:null===(t=e.workflow)||void 0===t?void 0:t.id,pe:null===(a=e.period)||void 0===a?void 0:a.id,ou:null===(r=e.orgUnit)||void 0===r?void 0:r.path,ouDisplayName:null===(o=e.orgUnit)||void 0===o?void 0:o.displayName}),n=l?`?${l}`:"";n!==he.location.search&&he.push({pathname:"/",search:n})})({workflow:r,period:n,orgUnit:s})}),[r,n,s]),Object(o.useEffect)((()=>{const e=()=>{i({type:Ce,payload:{dataApprovalWorkflows:t}})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),l.a.createElement(ve.Provider,{value:c},e)},Fe=()=>Object(o.useContext)(ve),xe={approvalStatus:{resource:"dataApprovals",params:({workflow:e,period:t,orgUnit:a})=>({wf:e.id,pe:t.id,ou:a.id})}},We=({children:e})=>{const{workflow:t,period:a,orgUnit:r}=Fe(),{loading:n,error:i,data:c,called:u,refetch:m}=Object(s.g)(xe,{lazy:!0});if(Object(o.useEffect)((()=>{t&&a&&r&&m({workflow:t,period:a,orgUnit:r})}),[t,a,r]),!t||!a||!r)return null;if(n||!u)return l.a.createElement(X,null);if(i)return l.a.createElement(d,{title:p.a.t("Could not load approval data")},i.message);const{state:y,...v}=c.approvalStatus;return l.a.createElement(me.Provider,{value:{approvalState:y,allowedActions:v,refresh:m,params:{wf:t.id,pe:a.id,ou:r.id}}},e)},Ue=()=>Object(o.useContext)(me),Ie={resource:"dataAcceptances",type:"create",params:({wf:e,pe:t,ou:a})=>({wf:e,pe:t,ou:a})},Te=()=>{const[e,{loading:t,error:a}]=Object(s.f)(Ie),{params:n,refresh:i}=Ue(),{show:c}=Object(s.b)(p.a.t("Acceptance failed: {{error}}",{error:a?a.toString():"",nsSeparator:"-:-"}));return Object(o.useEffect)((()=>{null!==a&&void 0!==a&&a.message&&c()}),[null===a||void 0===a?void 0:a.message]),l.a.createElement(r.c,{small:!0,disabled:t,onClick:async()=>{const{wf:t,pe:a,ou:r}=n;await e({wf:t,pe:a,ou:r}),i()}},p.a.t("Accept"))};var Re=a(511),Ye=a.n(Re);const je=({onApprove:e,onCancel:t,error:a})=>{const{workflow:o,period:n}=Fe(),{dataSets:s}=o,i=s.length;return l.a.createElement(r.B,null,l.a.createElement(r.E,null,i>1?p.a.t("Approving {{count}} data sets",{count:i}):p.a.t("Approving {{count}} data set",{count:i})),l.a.createElement(r.D,null,l.a.createElement("div",{className:Ye.a.summary},l.a.createElement("h1",{className:Ye.a.summaryTitle},i>1?p.a.t("{{count}} data sets for {{- workflow}}, {{period}} will be approved:",{count:i,workflow:o.displayName,period:n.displayName}):p.a.t("{{count}} data set for {{- workflow}}, {{period}} will be approved:",{count:i,workflow:o.displayName,period:n.displayName})),l.a.createElement("ul",{className:Ye.a.summaryList},s.map((({id:e,displayName:t})=>l.a.createElement("li",{className:Ye.a.summaryListItem,key:e},t))))),l.a.createElement("p",{className:Ye.a.confirmationStatement},p.a.t("Are you sure you want to approve this data?")),a&&l.a.createElement(r.F,{error:!0,title:p.a.t("There was a problem saving this approval")},p.a.t("This data couldn\u2019t be approved. Try again, or contact your system administrator."))),l.a.createElement(r.C,null,l.a.createElement(r.d,null,l.a.createElement(r.c,{onClick:t},p.a.t("Cancel")),l.a.createElement(r.c,{primary:!0,onClick:e},p.a.t("Approve")))))},Be={resource:"dataApprovals",type:"create",params:({wf:e,pe:t,ou:a})=>({wf:e,pe:t,ou:a})},Me=({disabled:e})=>{const[t,a]=Object(o.useState)(null),[n,i]=Object(o.useState)(!1),{params:c,refresh:d}=Ue(),u=()=>i(!1),{show:m}=Object(s.b)(p.a.t("Approval saved")),[y,{loading:v,error:f}]=(({onComplete:e,onError:t})=>Object(s.f)(Be,{onComplete:e,onError:t}))({onComplete:()=>{m(),d(),u()},onError:e=>a(e)}),w=f||t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.c,{primary:!0,small:!0,disabled:e,onClick:()=>i(!0)},p.a.t("Approve")),n&&l.a.createElement(je,{error:w,loading:v,onApprove:()=>{const{wf:e,pe:t,ou:a}=c;y({wf:e,pe:t,ou:a})},onCancel:u}))};var Le=a(512),ze=a.n(Le);const Ve=({children:e})=>l.a.createElement("div",{className:ze.a.bottomBarItem},e);var Je=a(513),qe=a.n(Je);const He={resource:"dataAcceptances",type:"delete",params:({wf:e,pe:t,ou:a})=>({wf:e,pe:t,ou:a})},Qe=()=>{const[e,{loading:t,error:a}]=Object(s.f)(He),{params:n,refresh:i}=Ue(),{show:c}=Object(s.b)(p.a.t("Unacceptance failed: {{error}}",{error:a?a.toString():"",nsSeparator:"-:-"}));return Object(o.useEffect)((()=>{null!==a&&void 0!==a&&a.message&&c()}),[null===a||void 0===a?void 0:a.message]),l.a.createElement(r.c,{small:!0,disabled:t,onClick:async()=>{const{wf:t,pe:a,ou:r}=n;await e({wf:t,pe:a,ou:r}),i()}},p.a.t("Unaccept"))},Ge={resource:"dataApprovals",type:"delete",params:({wf:e,pe:t,ou:a})=>({wf:e,pe:t,ou:a})},Ke=()=>{const[e,{loading:t,error:a}]=Object(s.f)(Ge),{params:n,refresh:i}=Ue(),{show:c}=Object(s.b)(p.a.t("Unapproval failed: {{error}}",{error:a?a.toString():"",nsSeparator:"-:-"}));return Object(o.useEffect)((()=>{null!==a&&void 0!==a&&a.message&&c()}),[null===a||void 0===a?void 0:a.message]),l.a.createElement(r.c,{small:!0,disabled:t,onClick:async()=>{const{wf:t,pe:a,ou:r}=n;await e({wf:t,pe:a,ou:r}),i()}},p.a.t("Unapprove"))},Ze=()=>{const{allowedActions:e,approvalState:t}=Ue(),{mayAccept:a,mayApprove:r,mayUnaccept:o,mayUnapprove:n}=e,s=!r&&!n;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:qe.a.bottomBar},l.a.createElement(Ve,null,l.a.createElement(oe,{approvalState:t})),(r||s)&&l.a.createElement(Ve,null,l.a.createElement(Me,{disabled:s})),a&&l.a.createElement(Ve,null,l.a.createElement(Te,null)),n&&l.a.createElement(Ve,null,l.a.createElement(Ke,null)),o&&l.a.createElement(Ve,null,l.a.createElement(Qe,null))))},Xe=({selected:e,onChange:t})=>{const{workflow:a}=Fe(),{dataSets:o}=a;return l.a.createElement(r.J,{scrollable:!0},o.map((a=>l.a.createElement(r.I,{key:a.id,onClick:()=>t(a.id),selected:a.id===e},a.displayName))))};var et=a(514),tt=a.n(et);const at=({title:e,columns:t,rows:a})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(r.m,null,e),l.a.createElement(r.i,null,l.a.createElement(r.L,null,l.a.createElement(r.l,null,t.map((e=>l.a.createElement(r.k,{key:e},e))))),l.a.createElement(r.K,null,a.map(((e,t)=>l.a.createElement(r.l,{key:t},e.map(((e,t)=>l.a.createElement(r.j,{key:t},e))))))))),rt={dataSetReport:{resource:"dataSetReport",params:({dataSetId:e,periodIds:t,orgUnit:a})=>({pe:t,ds:e,ou:a.id})}},ot=({dataSetId:e})=>{const t=Fe(),{orgUnit:a,workflow:n,period:i}=t,{dataSets:c}=n,d=c.find((({id:t})=>t===e)),u=d?Z(d.periodType,i.startDate,i.endDate).map((({id:e})=>e)):[],{called:m,loading:y,data:v,error:f,refetch:w}=Object(s.g)(rt,{lazy:!0}),g=null===v||void 0===v?void 0:v.dataSetReport,h=()=>w({periodIds:u,dataSetId:e,orgUnit:a});return Object(o.useEffect)((()=>{u.length&&e&&h()}),[u.join(","),e]),e?!m&&u.length||y?l.a.createElement("div",{className:tt.a.display},l.a.createElement("div",{className:tt.a.loadingWrapper},l.a.createElement(r.f,{small:!0}),p.a.t("Loading data set"))):f?l.a.createElement("div",{className:tt.a.display},l.a.createElement(r.F,{error:!0,title:p.a.t("There was a problem displaying this data set")},l.a.createElement("p",null,p.a.t("This data set couldn't be loaded or displayed. Try again, or contact your system administrator.")),l.a.createElement("button",{className:tt.a.retryButton,onClick:h},p.a.t("Retry loading data set")))):u.length&&g.length?l.a.createElement("div",{className:tt.a.display},g.map((e=>l.a.createElement(at,{key:e.title,title:e.title,columns:e.headers.map((e=>e.name)),rows:e.rows})))):l.a.createElement("div",{className:tt.a.noData},l.a.createElement("p",null,p.a.t("This data set doesn't have any data for {{- period}} in {{- orgUnit}}.",{period:i.displayName,orgUnit:a.displayName}))):l.a.createElement("div",{className:tt.a.chooseDataSet},l.a.createElement("h2",null,p.a.t("Choose a data set to review")),l.a.createElement("p",null,p.a.t("{{- workflowName}} has multiple data sets. Choose a data set from the tabs above.",{workflowName:n.displayName})))};var lt=a(515),nt=a.n(lt);const st=()=>{const{approvalState:e}=Ue(),{workflow:t}=Fe(),{dataSets:a,displayName:o}=t,n=a.length;return l.a.createElement("div",{className:nt.a.titleBar},l.a.createElement("span",{className:nt.a.workflowName},o),l.a.createElement("span",{className:nt.a.workflowDataSetsCount},l.a.createElement(r.u,null),1===n&&p.a.t("1 data set",{dataSetsCount:n}),1!==n&&p.a.t("{{dataSetsCount}} data sets",{dataSetsCount:n})),l.a.createElement(oe,{approvalState:e}))},it=()=>{const{workflow:e}=Fe(),[t,a]=Object(o.useState)(1===e.dataSets.length?e.dataSets[0].id:null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(st,null),l.a.createElement(Xe,{selected:t,onChange:a}),l.a.createElement(ot,{dataSetId:t}))};var ct=a(516),dt=a.n(ct);const pt=()=>{const{clearAll:e,period:t,orgUnit:a}=Fe();return null!==t&&void 0!==t&&t.id||null!==a&&void 0!==a&&a.path?l.a.createElement(r.c,{className:dt.a.button,secondary:!0,onClick:e},p.a.t("Clear selections")):null};var ut=a(528);const mt=Object(o.createContext)();class yt{constructor(e){this._map=e||new Map}_serialiseKey({workflowId:e,periodId:t,orgUnitId:a}){return`${e}-${t}-${a}`}set(e,t){this._map.set(this._serialiseKey(e),t)}get(e){return this._map.get(this._serialiseKey(e))}clone(){return new yt(new Map(this._map))}}const vt=({children:e})=>{const[t,a]=Object(o.useState)(new yt),r=(({updateApprovalStatuses:e})=>{const t=Object(s.e)(),a=Object(o.useRef)([]),r=Object(ut.a)((()=>{const r=[];a.current.forEach((e=>{const t=r.find((({workflowId:t,periodId:a})=>t===e.workflowId&&a===e.periodId));t?t.orgUnitIds.push(e.orgUnitId):r.push({workflowId:e.workflowId,periodId:e.periodId,orgUnitIds:[e.orgUnitId]})})),a.current=[],r.forEach((async({workflowId:a,periodId:r,orgUnitIds:o})=>{e({periodId:r,workflowId:a,approvalStatusUpdates:o.reduce(((e,t)=>(e[t]="LOADING",e)),{})});const l={};try{const{approvalStatuses:e}=await t.query({approvalStatuses:{resource:"dataApprovals/approvals",params:{wf:a,pe:r,ou:o}}});e.forEach((({ou:e,state:t})=>{l[e]=t||"UNAPPROVABLE"}))}catch(n){o.forEach((e=>{l[e]="FETCH_ERROR"}))}e({periodId:r,workflowId:a,approvalStatusUpdates:l})}))}),10);return({workflowId:e,periodId:t,orgUnitId:o})=>{a.current.push({periodId:t,workflowId:e,orgUnitId:o}),r()}})({updateApprovalStatuses:({workflowId:e,periodId:t,approvalStatusUpdates:r})=>{a((a=>{const o=a.clone();for(const[l,n]of Object.entries(r))o.set({workflowId:e,periodId:t,orgUnitId:l},n);return o}))}});return l.a.createElement(mt.Provider,{value:{approvalStatuses:t,fetchApprovalStatus:r}},e)},ft=()=>{const{approvalStatuses:e,fetchApprovalStatus:t}=Object(o.useContext)(mt);return{getApprovalStatus:({workflowId:t,periodId:a,orgUnitId:r})=>e.get({workflowId:t,periodId:a,orgUnitId:r}),fetchApprovalStatus:t}};var wt=a(517),gt=a.n(wt);const ht=({children:e,prefix:t,placeholder:a,value:n,onClose:s,onOpen:i,disabled:c,open:d,requiredValuesMessage:p,popoverMaxWidth:u})=>{const m=Object(o.useRef)(),y=d?r.t:r.s,v=l.a.createElement("button",{ref:m,className:gt.a.button,onClick:i,disabled:c},l.a.createElement("span",{className:gt.a.prefix},t),l.a.createElement("span",{className:gt.a.value},n||!c&&a),l.a.createElement(y,{color:c?r.O.grey600:void 0}));return l.a.createElement(l.a.Fragment,null,c?l.a.createElement(r.N,{content:p,placement:"bottom"},(({ref:e,onMouseOver:t,onMouseOut:a})=>l.a.createElement("div",{ref:e,onMouseOver:t,onMouseOut:a,className:gt.a.tooltipwrap},v))):v,d&&l.a.createElement(r.H,{reference:m,arrow:!1,placement:"bottom-end",onClickOutside:s,maxWidth:u},e))};var Et=a(518),bt=a.n(Et);const Nt=[{status:"UNAPPROVED_WAITING",displayName:p.a.t("Waiting for approval")},{status:"UNAPPROVED_READY",displayName:p.a.t("Ready for approval")},{status:"APPROVED_HERE",displayName:p.a.t("Approved")},{status:"UNAPPROVABLE",displayName:p.a.t("Cannot be approved")}],Dt=()=>l.a.createElement("div",{className:bt.a.container},Nt.map((({status:e,displayName:t})=>l.a.createElement("div",{key:e,className:bt.a.label},l.a.createElement(ie,{approvalState:e,showTitle:!1}),t))));var kt=a(519),St=a.n(kt);const _t=({label:e,orgUnitId:t})=>{const{workflow:a,period:n}=Fe(),{getApprovalStatus:s,fetchApprovalStatus:i}=ft(),c=s({workflowId:a.id,periodId:n.id,orgUnitId:t});return Object(o.useEffect)((()=>{i({workflowId:a.id,periodId:n.id,orgUnitId:t})}),[]),"LOADING"===c?e:"FETCH_ERROR"===c?l.a.createElement("div",{className:St.a.container},l.a.createElement("span",{title:p.a.t("Failed to load approval state"),className:St.a.iconContainer},l.a.createElement(r.w,{color:r.O.yellow500})),e):c?l.a.createElement("div",{className:St.a.container},l.a.createElement(ie,{approvalState:c}),e):e};var At=a(520),Ot=a.n(At);const Ct="ORG_UNIT",$t=()=>{const{organisationUnits:e}=pe(),{orgUnit:t,selectOrgUnit:a,workflow:o,period:n,openedSelect:s,setOpenedSelect:i}=Fe(),c=s===Ct,d=null===t||void 0===t?void 0:t.displayName,u=null!==o&&void 0!==o&&o.id?p.a.t("Choose a period first"):p.a.t("Choose a workflow and period first"),m=e.map((({id:e})=>e)),y=null!==t&&void 0!==t&&t.path?[t.path]:void 0;return l.a.createElement(ht,{prefix:p.a.t("Organisation Unit"),placeholder:p.a.t("Choose an organisation unit"),value:d,open:c,disabled:!(null!==o&&void 0!==o&&o.id&&null!==n&&void 0!==n&&n.id),onOpen:()=>i(Ct),onClose:()=>i(""),requiredValuesMessage:u,popoverMaxWidth:400},l.a.createElement("div",{className:Ot.a.popoverContainer},l.a.createElement("div",{className:Ot.a.scrollbox},l.a.createElement(r.G,{roots:m,onChange:({displayName:e,id:t,path:r})=>{a({displayName:e,id:t,path:r})},initiallyExpanded:y,selected:y,singleSelection:!0,renderNodeLabel:({label:e,node:t})=>l.a.createElement(_t,{label:e,orgUnitId:t.id})})),l.a.createElement(r.n,{margin:0}),l.a.createElement(Dt,null)))};var Pt=a(521),Ft=a.n(Pt);const xt=({periodType:e,year:t})=>{const{workflow:a,period:o,orgUnit:n,selectPeriod:s}=Fe(),i=G(e,t);return l.a.createElement(r.z,{dense:!0,className:Ft.a.menu},i.map((e=>l.a.createElement(r.A,{active:e.id===(null===o||void 0===o?void 0:o.id),key:e.id,href:we({wf:null===a||void 0===a?void 0:a.id,ou:null===n||void 0===n?void 0:n.path,pe:e.id}),label:e.displayName,onClick:()=>s(e)}))))};var Wt=a(522),Ut=a.n(Wt);const It=({maxYear:e,year:t,onYearChange:a})=>l.a.createElement("div",{className:Ut.a.container},l.a.createElement(r.c,{disabled:1970===t,onClick:()=>a(t-1),icon:l.a.createElement(r.p,null)}),l.a.createElement("span",{className:Ut.a.year},t),l.a.createElement(r.c,{disabled:t===e,onClick:()=>a(t+1),icon:l.a.createElement(r.q,null)})),Tt="PERIOD",Rt=e=>e?(e=>{if(!$(e))throw new Error(`Invalid periodType "${e}" supplied to "getMostRecentCompletedYear"`);const t=F();let a=t.getFullYear(),r=Z(e,`${t.getFullYear()}-01-01`,t);if(r.length>0)return a;for(;0===r.length;)--a,r=Z(e,`${a}-01-01`,`${a}-12-31`);return a})(e):null,Yt=()=>{const{period:e,workflow:t,selectPeriod:a,openedSelect:r,setOpenedSelect:n}=Fe(),[s,i]=Object(o.useState)((()=>Rt(null===t||void 0===t?void 0:t.periodType))),[c,d]=Object(o.useState)((null===e||void 0===e?void 0:e.year)||s),u=r===Tt,m=null===e||void 0===e?void 0:e.displayName;return Object(o.useEffect)((()=>{null!==e&&void 0!==e&&e.year&&d(e.year)}),[null===e||void 0===e?void 0:e.year]),Object(o.useEffect)((()=>{null!==t&&void 0!==t&&t.periodType&&i(Rt(null===t||void 0===t?void 0:t.periodType))}),[null===t||void 0===t?void 0:t.periodType]),l.a.createElement(ht,{prefix:p.a.t("Period"),placeholder:p.a.t("Choose a period"),value:m,open:u,disabled:!(null!==t&&void 0!==t&&t.id),onOpen:()=>n(Tt),onClose:()=>n(""),requiredValuesMessage:p.a.t("Choose a workflow first")},l.a.createElement(It,{maxYear:s,year:c,onYearChange:e=>{a(null),d(e)}}),l.a.createElement(xt,{periodType:null===t||void 0===t?void 0:t.periodType,year:c}))};var jt=a(523),Bt=a.n(jt);const Mt=({id:e,name:t,periodType:a,active:o,onClick:n})=>{const s=l.a.createElement("div",{className:Bt.a.option},l.a.createElement("span",{className:Bt.a.title},t),l.a.createElement("span",{className:Bt.a.subtitle},a||"UNAVAILABLE"));return l.a.createElement(r.A,{href:we({wf:e}),className:Bt.a.bordered,active:o,onClick:n,label:s})};var Lt=a(524),zt=a.n(Lt);const Vt="WORKFLOW",Jt=()=>{const{dataApprovalWorkflows:e}=pe(),{workflow:t,selectWorkflow:a,openedSelect:o,setOpenedSelect:n}=Fe(),s=o===Vt,i=null===t||void 0===t?void 0:t.displayName;return l.a.createElement(ht,{prefix:p.a.t("Workflow"),placeholder:p.a.t("Choose a workflow"),value:i,open:s,onOpen:()=>n(Vt),onClose:()=>n("")},0===e.length?l.a.createElement("div",{className:zt.a.message},p.a.t("No workflows found. None may exist, or you may not have access to any.")):l.a.createElement(r.z,null,e.map((e=>l.a.createElement(Mt,{key:e.id,id:e.id,name:e.displayName,periodType:e.periodType,active:e.id===(null===t||void 0===t?void 0:t.id),onClick:()=>a(e)})))))},qt=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Jt,null),l.a.createElement(Yt,null),l.a.createElement(vt,null,l.a.createElement($t,null)),l.a.createElement(pt,null));var Ht=a(525),Qt=a.n(Ht);function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const Kt=({children:e,className:t})=>l.a.createElement("div",{className:t},e),Zt=e=>l.a.createElement(Kt,Gt({},e,{className:Qt.a.container})),Xt=e=>l.a.createElement(Kt,Gt({},e,{className:Qt.a.top})),ea=e=>l.a.createElement(Kt,Gt({},e,{className:Qt.a.content})),ta=e=>l.a.createElement(Kt,Gt({},e,{className:Qt.a.bottom}));var aa=a(526);p.a.addResources("en","default",aa);p.a,t.default=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(r.h,{spacers:!0,colors:!0,theme:!0}),l.a.createElement(de,null,l.a.createElement(ue,null,l.a.createElement(Pe,null,l.a.createElement(Zt,null,l.a.createElement(Xt,null,l.a.createElement(qt,null)),l.a.createElement(We,null,l.a.createElement(ea,null,l.a.createElement(it,null)),l.a.createElement(ta,null,l.a.createElement(Ze,null))))))))}}]);
//# sourceMappingURL=app.07e40ef0.chunk.js.map